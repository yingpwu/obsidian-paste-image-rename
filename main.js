/* THIS IS A GENERATED/BUNDLED FILE BY ESBUILD */
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// package.json
var require_package = __commonJS({
  "package.json"(exports, module2) {
    module2.exports = {
      name: "obsidian-paste-image-rename",
      version: "1.6.1",
      main: "main.js",
      scripts: {
        dev: "node esbuild.config.mjs",
        build: "tsc -noEmit -skipLibCheck && node esbuild.config.mjs production",
        version: "node version-bump.mjs && git add manifest.json versions.json",
        release: "npm run build && gh release create ${npm_package_version} build/*"
      },
      keywords: [],
      author: "Reorx",
      license: "MIT",
      devDependencies: {
        "@types/node": "^18.11.18",
        "@typescript-eslint/eslint-plugin": "^5.49.0",
        "@typescript-eslint/parser": "^5.49.0",
        "builtin-modules": "^3.3.0",
        esbuild: "0.16.17",
        obsidian: "^1.1.1",
        tslib: "2.5.0",
        typescript: "4.9.4"
      },
      dependencies: {
        "cash-dom": "^8.1.2"
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PasteImageRenamePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/batch.ts
var import_obsidian = require("obsidian");

// src/utils.ts
var DEBUG = true;
if (DEBUG)
  console.log("DEBUG is enabled");
function debugLog(...args) {
  if (DEBUG) {
    console.log(new Date().toISOString().slice(11, 23), ...args);
  }
}
function createElementTree(rootEl, opts) {
  const result = {
    el: rootEl.createEl(opts.tag, opts),
    children: []
  };
  const children = opts.children || [];
  for (const child of children) {
    result.children.push(createElementTree(result.el, child));
  }
  return result;
}
var path = {
  // Credit: @creationix/path.js
  join(...partSegments) {
    let parts = [];
    for (let i = 0, l = partSegments.length; i < l; i++) {
      parts = parts.concat(partSegments[i].split("/"));
    }
    const newParts = [];
    for (let i = 0, l = parts.length; i < l; i++) {
      const part = parts[i];
      if (!part || part === ".")
        continue;
      else
        newParts.push(part);
    }
    if (parts[0] === "")
      newParts.unshift("");
    return newParts.join("/");
  },
  // returns the last part of a path, e.g. 'foo.jpg'
  basename(fullpath) {
    const sp = fullpath.split("/");
    return sp[sp.length - 1];
  },
  // return extension without dot, e.g. 'jpg'
  extension(fullpath) {
    const positions = [...fullpath.matchAll(new RegExp("\\.", "gi"))].map((a) => a.index);
    return fullpath.slice(positions[positions.length - 1] + 1);
  }
};
var filenameNotAllowedChars = /[^\p{L}0-9~`!@$&*()\-_=+{};'",<.>? ]/ug;
var sanitizer = {
  filename(s) {
    return s.replace(filenameNotAllowedChars, "").trim();
  },
  delimiter(s) {
    s = this.filename(s);
    if (!s)
      s = "-";
    return s;
  }
};
function escapeRegExp(s) {
  return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function lockInputMethodComposition(el) {
  const state = {
    lock: false
  };
  el.addEventListener("compositionstart", () => {
    state.lock = true;
  });
  el.addEventListener("compositionend", () => {
    state.lock = false;
  });
  return state;
}

// src/batch.ts
var ImageBatchRenameModal = class extends import_obsidian.Modal {
  constructor(app, activeFile, renameFunc, onClose) {
    super(app);
    this.activeFile = activeFile;
    this.renameFunc = renameFunc;
    this.onCloseExtra = onClose;
    this.state = {
      namePattern: "",
      extPattern: "",
      nameReplace: "",
      renameTasks: []
    };
  }
  onOpen() {
    this.containerEl.addClass("image-rename-modal");
    const { contentEl, titleEl } = this;
    titleEl.setText("Batch rename embeded files");
    const namePatternSetting = new import_obsidian.Setting(contentEl).setName("Name pattern").setDesc("Please input the name pattern to match files (regex)").addText((text) => text.setValue(this.state.namePattern).onChange(
      (value) => __async(this, null, function* () {
        this.state.namePattern = value;
      })
    ));
    const npInputEl = namePatternSetting.controlEl.children[0];
    npInputEl.focus();
    const npInputState = lockInputMethodComposition(npInputEl);
    npInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !npInputState.lock) {
        e.preventDefault();
        if (!this.state.namePattern) {
          errorEl.innerText = 'Error: "Name pattern" could not be empty';
          errorEl.style.display = "block";
          return;
        }
        this.matchImageNames(tbodyEl);
      }
    }));
    const extPatternSetting = new import_obsidian.Setting(contentEl).setName("Extension pattern").setDesc("Please input the extension pattern to match files (regex)").addText((text) => text.setValue(this.state.extPattern).onChange(
      (value) => __async(this, null, function* () {
        this.state.extPattern = value;
      })
    ));
    const extInputEl = extPatternSetting.controlEl.children[0];
    extInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter") {
        e.preventDefault();
        this.matchImageNames(tbodyEl);
      }
    }));
    const nameReplaceSetting = new import_obsidian.Setting(contentEl).setName("Name replace").setDesc("Please input the string to replace the matched name (use $1, $2 for regex groups)").addText((text) => text.setValue(this.state.nameReplace).onChange(
      (value) => __async(this, null, function* () {
        this.state.nameReplace = value;
      })
    ));
    const nrInputEl = nameReplaceSetting.controlEl.children[0];
    const nrInputState = lockInputMethodComposition(nrInputEl);
    nrInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !nrInputState.lock) {
        e.preventDefault();
        this.matchImageNames(tbodyEl);
      }
    }));
    const matchedContainer = contentEl.createDiv({
      cls: "matched-container"
    });
    const tableET = createElementTree(matchedContainer, {
      tag: "table",
      children: [
        {
          tag: "thead",
          children: [
            {
              tag: "tr",
              children: [
                {
                  tag: "td",
                  text: "Original path"
                },
                {
                  tag: "td",
                  text: "Renamed Name"
                }
              ]
            }
          ]
        },
        {
          tag: "tbody"
        }
      ]
    });
    const tbodyEl = tableET.children[1].el;
    const errorEl = contentEl.createDiv({
      cls: "error",
      attr: {
        style: "display: none;"
      }
    });
    new import_obsidian.Setting(contentEl).addButton((button) => {
      button.setButtonText("Rename all").setClass("mod-cta").onClick(() => {
        new ConfirmModal(
          this.app,
          "Confirm rename all",
          `Are you sure? This will rename all the ${this.state.renameTasks.length} images matched the pattern.`,
          () => {
            this.renameAll();
            this.close();
          }
        ).open();
      });
    }).addButton((button) => {
      button.setButtonText("Cancel").onClick(() => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onCloseExtra();
  }
  renameAll() {
    return __async(this, null, function* () {
      debugLog("renameAll", this.state);
      for (const task of this.state.renameTasks) {
        yield this.renameFunc(task.file, task.name);
      }
    });
  }
  matchImageNames(tbodyEl) {
    const { state } = this;
    const renameTasks = [];
    tbodyEl.empty();
    const fileCache = this.app.metadataCache.getFileCache(this.activeFile);
    if (!fileCache || !fileCache.embeds)
      return;
    const namePatternRegex = new RegExp(state.namePattern, "g");
    const extPatternRegex = new RegExp(state.extPattern);
    fileCache.embeds.forEach((embed) => {
      const file = this.app.metadataCache.getFirstLinkpathDest(embed.link, this.activeFile.path);
      if (!file) {
        console.warn("file not found", embed.link);
        return;
      }
      if (state.extPattern) {
        const m0 = extPatternRegex.exec(file.extension);
        if (!m0)
          return;
      }
      const stem = file.basename;
      namePatternRegex.lastIndex = 0;
      const m1 = namePatternRegex.exec(stem);
      if (!m1)
        return;
      let renamedName = file.name;
      if (state.nameReplace) {
        namePatternRegex.lastIndex = 0;
        renamedName = stem.replace(namePatternRegex, state.nameReplace);
        renamedName = `${renamedName}.${file.extension}`;
      }
      renameTasks.push({
        file,
        name: renamedName
      });
      createElementTree(tbodyEl, {
        tag: "tr",
        children: [
          {
            tag: "td",
            children: [
              {
                tag: "span",
                text: file.name
              },
              {
                tag: "div",
                text: file.path,
                attr: {
                  class: "file-path"
                }
              }
            ]
          },
          {
            tag: "td",
            children: [
              {
                tag: "span",
                text: renamedName
              },
              {
                tag: "div",
                text: path.join(file.parent.path, renamedName),
                attr: {
                  class: "file-path"
                }
              }
            ]
          }
        ]
      });
    });
    debugLog("new renameTasks", renameTasks);
    state.renameTasks = renameTasks;
  }
};
var ConfirmModal = class extends import_obsidian.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    titleEl.setText(this.title);
    contentEl.createEl("p", {
      text: this.message
    });
    new import_obsidian.Setting(contentEl).addButton((button) => {
      button.setButtonText("Yes").setClass("mod-warning").onClick(() => {
        this.onConfirm();
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText("No").onClick(() => {
        this.close();
      });
    });
  }
};

// src/template.ts
var dateTmplRegex = /{{DATE:([^}]+)}}/gm;
var frontmatterTmplRegex = /{{frontmatter:([^}]+)}}/gm;
var replaceDateVar = (s, date) => {
  const m = dateTmplRegex.exec(s);
  if (!m)
    return s;
  return s.replace(m[0], date.format(m[1]));
};
var replaceFrontmatterVar = (s, frontmatter) => {
  if (!frontmatter)
    return s;
  const m = frontmatterTmplRegex.exec(s);
  if (!m)
    return s;
  return s.replace(m[0], frontmatter[m[1]] || "");
};
var renderTemplate = (tmpl, data, frontmatter) => {
  const now = window.moment();
  let text = tmpl;
  let newtext;
  while ((newtext = replaceDateVar(text, now)) != text) {
    text = newtext;
  }
  while ((newtext = replaceFrontmatterVar(text, frontmatter)) != text) {
    text = newtext;
  }
  text = text.replace(/{{imageNameKey}}/gm, data.imageNameKey).replace(/{{fileName}}/gm, data.fileName).replace(/{{dirName}}/gm, data.dirName).replace(/{{firstHeading}}/gm, data.firstHeading);
  return text;
};

// src/main.ts
var DEFAULT_SETTINGS = {
  imageNamePattern: "{{fileName}}",
  dupNumberAtStart: false,
  auto_resize: false,
  dupNumberDelimiter: "-",
  resize_pattern: "|600",
  dupNumberAlways: false,
  autoRename: false,
  handleAllAttachments: false,
  excludeExtensionPattern: "",
  disableRenameNotice: false
};
var PASTED_IMAGE_PREFIX = "Pasted image ";
var PasteImageRenamePlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.modals = [];
  }
  onload() {
    return __async(this, null, function* () {
      const pkg = require_package();
      console.log(
        `Plugin loading: ${pkg.name} ${pkg.version} BUILD_ENV=${""}`
      );
      yield this.loadSettings();
      this.registerEvent(
        this.app.vault.on("create", (file) => {
          if (!(file instanceof import_obsidian2.TFile))
            return;
          const timeGapMs = new Date().getTime() - file.stat.ctime;
          if (timeGapMs > 1e3)
            return;
          if (isMarkdownFile(file))
            return;
          if (isPastedImage(file)) {
            debugLog("pasted image created", file);
            this.startRenameProcess(file, this.settings.autoRename);
          } else {
            if (this.settings.handleAllAttachments) {
              debugLog("handleAllAttachments for file", file);
              if (this.testExcludeExtension(file)) {
                debugLog("excluded file by ext", file);
                return;
              }
              this.startRenameProcess(file, this.settings.autoRename);
            }
          }
        })
      );
      const startBatchRenameProcess = () => {
        this.openBatchRenameModal();
      };
      this.addCommand({
        id: "batch-rename-embeded-files",
        name: "Batch rename embeded files (in the current file)",
        callback: startBatchRenameProcess
      });
      if (DEBUG) {
        this.addRibbonIcon(
          "wand-glyph",
          "Batch rename embeded files",
          startBatchRenameProcess
        );
      }
      const batchRenameAllImages = () => {
        this.batchRenameAllImages();
      };
      this.addCommand({
        id: "batch-rename-all-images",
        name: "Batch rename all images instantly (in the current file)",
        callback: batchRenameAllImages
      });
      if (DEBUG) {
        this.addRibbonIcon(
          "wand-glyph",
          "Batch rename all images instantly (in the current file)",
          batchRenameAllImages
        );
      }
      this.addSettingTab(new SettingTab(this.app, this));
    });
  }
  startRenameProcess(file, autoRename = false) {
    return __async(this, null, function* () {
      const activeFile = this.getActiveFile();
      if (!activeFile) {
        new import_obsidian2.Notice("Error: No active file found.");
        return;
      }
      const { stem, newName, isMeaningful } = this.generateNewName(
        file,
        activeFile
      );
      debugLog("generated newName:", newName, isMeaningful);
      if (!isMeaningful || !autoRename) {
        this.openRenameModal(
          file,
          isMeaningful ? stem : "",
          activeFile.path
        );
        return;
      }
      this.renameFile(file, newName, activeFile.path, true);
    });
  }
  renameFile(file, inputNewName, sourcePath, replaceCurrentLine) {
    return __async(this, null, function* () {
      const { name: newName } = yield this.deduplicateNewName(
        inputNewName,
        file
      );
      debugLog("deduplicated newName:", newName);
      const originName = file.name;
      const linkText = this.app.fileManager.generateMarkdownLink(
        file,
        sourcePath
      );
      const newPath = path.join(file.parent.path, newName);
      try {
        yield this.app.fileManager.renameFile(file, newPath);
      } catch (err) {
        new import_obsidian2.Notice(`Failed to rename ${newName}: ${err}`);
        throw err;
      }
      if (!replaceCurrentLine) {
        return;
      }
      const newLinkText = this.app.fileManager.generateMarkdownLink(
        file,
        sourcePath
      );
      debugLog("replace text", linkText, newLinkText);
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian2.Notice(`Failed to rename ${newName}: no active editor`);
        return;
      }
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      var replacedLine = "";
      if (this.settings.auto_resize) {
        const resized_line_text = `${newLinkText.slice(0, -2)}${this.settings.resize_pattern}${newLinkText.slice(-2)}`;
        replacedLine = line.replace(linkText, resized_line_text);
      } else {
        replacedLine = line.replace(linkText, newLinkText);
      }
      debugLog("current line -> replaced line", line, replacedLine);
      editor.transaction({
        changes: [
          {
            from: __spreadProps(__spreadValues({}, cursor), { ch: 0 }),
            to: __spreadProps(__spreadValues({}, cursor), { ch: line.length }),
            text: replacedLine
          }
        ]
      });
      if (!this.settings.disableRenameNotice) {
        new import_obsidian2.Notice(`Renamed ${originName} to ${newName}`);
      }
    });
  }
  openRenameModal(file, newName, sourcePath) {
    const modal = new ImageRenameModal(
      this.app,
      file,
      newName,
      (confirmedName) => {
        debugLog("confirmedName:", confirmedName);
        this.renameFile(file, confirmedName, sourcePath, true);
      },
      () => {
        this.modals.splice(this.modals.indexOf(modal), 1);
      }
    );
    this.modals.push(modal);
    modal.open();
    debugLog("modals count", this.modals.length);
  }
  openBatchRenameModal() {
    const activeFile = this.getActiveFile();
    const modal = new ImageBatchRenameModal(
      this.app,
      activeFile,
      (file, name) => __async(this, null, function* () {
        yield this.renameFile(file, name, activeFile.path);
      }),
      () => {
        this.modals.splice(this.modals.indexOf(modal), 1);
      }
    );
    this.modals.push(modal);
    modal.open();
  }
  batchRenameAllImages() {
    return __async(this, null, function* () {
      const activeFile = this.getActiveFile();
      const fileCache = this.app.metadataCache.getFileCache(activeFile);
      if (!fileCache || !fileCache.embeds)
        return;
      const extPatternRegex = /jpe?g|png|gif|tiff|webp/i;
      for (const embed of fileCache.embeds) {
        const file = this.app.metadataCache.getFirstLinkpathDest(
          embed.link,
          activeFile.path
        );
        if (!file) {
          console.warn("file not found", embed.link);
          return;
        }
        const m0 = extPatternRegex.exec(file.extension);
        if (!m0)
          return;
        const { newName, isMeaningful } = this.generateNewName(
          file,
          activeFile
        );
        debugLog("generated newName:", newName, isMeaningful);
        if (!isMeaningful) {
          new import_obsidian2.Notice(
            "Failed to batch rename images: the generated name is not meaningful"
          );
          break;
        }
        yield this.renameFile(file, newName, activeFile.path, false);
      }
    });
  }
  // returns a new name for the input file, with extension
  generateNewName(file, activeFile) {
    let imageNameKey = "";
    let firstHeading = "";
    let frontmatter;
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    if (fileCache) {
      debugLog("frontmatter", fileCache.frontmatter);
      frontmatter = fileCache.frontmatter;
      imageNameKey = (frontmatter == null ? void 0 : frontmatter.imageNameKey) || "";
      firstHeading = getFirstHeading(fileCache.headings);
    } else {
      console.warn(
        "could not get file cache from active file",
        activeFile.name
      );
    }
    const stem = renderTemplate(
      this.settings.imageNamePattern,
      {
        imageNameKey,
        fileName: activeFile.basename,
        dirName: activeFile.parent.name,
        firstHeading
      },
      frontmatter
    );
    const meaninglessRegex = new RegExp(
      `[${this.settings.dupNumberDelimiter}\\s]`,
      "gm"
    );
    return {
      stem,
      newName: stem + "." + file.extension,
      isMeaningful: stem.replace(meaninglessRegex, "") !== ""
    };
  }
  // newName: foo.ext
  deduplicateNewName(newName, file) {
    return __async(this, null, function* () {
      const dir = file.parent.path;
      const listed = yield this.app.vault.adapter.list(dir);
      debugLog("sibling files", listed);
      const newNameExt = path.extension(newName), newNameStem = newName.slice(
        0,
        newName.length - newNameExt.length - 1
      ), newNameStemEscaped = escapeRegExp(newNameStem), delimiter = this.settings.dupNumberDelimiter, delimiterEscaped = escapeRegExp(delimiter);
      let dupNameRegex;
      if (this.settings.dupNumberAtStart) {
        dupNameRegex = new RegExp(
          `^(?<number>\\d+)${delimiterEscaped}(?<name>${newNameStemEscaped})\\.${newNameExt}$`
        );
      } else {
        dupNameRegex = new RegExp(
          `^(?<name>${newNameStemEscaped})${delimiterEscaped}(?<number>\\d+)\\.${newNameExt}$`
        );
      }
      debugLog("dupNameRegex", dupNameRegex);
      const dupNameNumbers = [];
      let isNewNameExist = false;
      for (let sibling of listed.files) {
        sibling = path.basename(sibling);
        if (sibling == newName) {
          isNewNameExist = true;
          continue;
        }
        const m = dupNameRegex.exec(sibling);
        if (!m)
          continue;
        dupNameNumbers.push(parseInt(m.groups.number));
      }
      if (isNewNameExist || this.settings.dupNumberAlways) {
        const newNumber = dupNameNumbers.length > 0 ? Math.max(...dupNameNumbers) + 1 : 1;
        if (this.settings.dupNumberAtStart) {
          newName = `${newNumber}${delimiter}${newNameStem}.${newNameExt}`;
        } else {
          newName = `${newNameStem}${delimiter}${newNumber}.${newNameExt}`;
        }
      }
      return {
        name: newName,
        stem: newName.slice(0, newName.length - newNameExt.length - 1),
        extension: newNameExt
      };
    });
  }
  getActiveFile() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const file = view == null ? void 0 : view.file;
    debugLog("active file", file == null ? void 0 : file.path);
    return file;
  }
  getActiveEditor() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    return view == null ? void 0 : view.editor;
  }
  onunload() {
    this.modals.map((modal) => modal.close());
  }
  testExcludeExtension(file) {
    const pattern = this.settings.excludeExtensionPattern;
    if (!pattern)
      return false;
    return new RegExp(pattern).test(file.extension);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign(
        {},
        DEFAULT_SETTINGS,
        yield this.loadData()
      );
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
function getFirstHeading(headings) {
  if (headings && headings.length > 0) {
    for (const heading of headings) {
      if (heading.level === 1) {
        return heading.heading;
      }
    }
  }
  return "";
}
function isPastedImage(file) {
  if (file instanceof import_obsidian2.TFile) {
    if (file.name.startsWith(PASTED_IMAGE_PREFIX)) {
      return true;
    }
  }
  return false;
}
function isMarkdownFile(file) {
  if (file instanceof import_obsidian2.TFile) {
    if (file.extension === "md") {
      return true;
    }
  }
  return false;
}
var ImageRenameModal = class extends import_obsidian2.Modal {
  constructor(app, src, stem, renameFunc, onClose) {
    super(app);
    this.src = src;
    this.stem = stem;
    this.renameFunc = renameFunc;
    this.onCloseExtra = onClose;
  }
  onOpen() {
    this.containerEl.addClass("image-rename-modal");
    const { contentEl, titleEl } = this;
    titleEl.setText("Rename image");
    const imageContainer = contentEl.createDiv({
      cls: "image-container"
    });
    imageContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.src)
      }
    });
    let stem = this.stem;
    const ext = this.src.extension;
    const getNewName = (stem2) => stem2 + "." + ext;
    const getNewPath = (stem2) => path.join(this.src.parent.path, getNewName(stem2));
    const infoET = createElementTree(contentEl, {
      tag: "ul",
      cls: "info",
      children: [
        {
          tag: "li",
          children: [
            {
              tag: "span",
              text: "Origin path"
            },
            {
              tag: "span",
              text: this.src.path
            }
          ]
        },
        {
          tag: "li",
          children: [
            {
              tag: "span",
              text: "New path"
            },
            {
              tag: "span",
              text: getNewPath(stem)
            }
          ]
        }
      ]
    });
    const doRename = () => __async(this, null, function* () {
      debugLog("doRename", `stem=${stem}`);
      this.renameFunc(getNewName(stem));
    });
    const nameSetting = new import_obsidian2.Setting(contentEl).setName("New name").setDesc(
      "Please input the new name for the image (without extension)"
    ).addText(
      (text) => text.setValue(stem).onChange((value) => __async(this, null, function* () {
        stem = sanitizer.filename(value);
        infoET.children[1].children[1].el.innerText = getNewPath(stem);
      }))
    );
    const nameInputEl = nameSetting.controlEl.children[0];
    nameInputEl.focus();
    const nameInputState = lockInputMethodComposition(nameInputEl);
    nameInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !nameInputState.lock) {
        e.preventDefault();
        if (!stem) {
          errorEl.innerText = 'Error: "New name" could not be empty';
          errorEl.style.display = "block";
          return;
        }
        doRename();
        this.close();
      }
    }));
    const errorEl = contentEl.createDiv({
      cls: "error",
      attr: {
        style: "display: none;"
      }
    });
    new import_obsidian2.Setting(contentEl).addButton((button) => {
      button.setButtonText("Rename").onClick(() => {
        doRename();
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText("Cancel").onClick(() => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onCloseExtra();
  }
};
var imageNamePatternDesc = `
The pattern indicates how the new name should be generated.

Available variables:
- {{fileName}}: name of the active file, without ".md" extension.
- {{dirName}}: name of the directory which contains the document (the root directory of vault results in an empty variable).
- {{imageNameKey}}: this variable is read from the markdown file's frontmatter, from the same key "imageNameKey".
- {{DATE:$FORMAT}}: use "$FORMAT" to format the current date, "$FORMAT" must be a Moment.js format string, e.g. {{DATE:YYYY-MM-DD}}.

Here are some examples from pattern to image names (repeat in sequence), variables: fileName = "My note", imageNameKey = "foo":
- {{fileName}}: My note, My note-1, My note-2
- {{imageNameKey}}: foo, foo-1, foo-2
- {{imageNameKey}}-{{DATE:YYYYMMDD}}: foo-20220408, foo-20220408-1, foo-20220408-2
`;
var SettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Image name pattern").setDesc(imageNamePatternDesc).setClass("long-description-setting-item").addText(
      (text) => text.setPlaceholder("{{imageNameKey}}").setValue(this.plugin.settings.imageNamePattern).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.imageNamePattern = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Duplicate number at start (or end)").setDesc(
      `If enabled, duplicate number will be added at the start as prefix for the image name, otherwise it will be added at the end as suffix for the image name.`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.dupNumberAtStart).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberAtStart = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("auto resieze").setDesc(
      `If enabled, auto resize the image to a smaller size in editor viewer`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.auto_resize).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.auto_resize = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("resize pattern").setDesc(`default resize pattern is "|600"`).addText(
      (text) => text.setValue(this.plugin.settings.resize_pattern).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.resize_pattern = sanitizer.delimiter(value);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Duplicate number delimiter").setDesc(
      `The delimiter to generate the number prefix/suffix for duplicated names. For example, if the value is "-", the suffix will be like "-1", "-2", "-3", and the prefix will be like "1-", "2-", "3-". Only characters that are valid in file names are allowed.`
    ).addText(
      (text) => text.setValue(this.plugin.settings.dupNumberDelimiter).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberDelimiter = sanitizer.delimiter(value);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Always add duplicate number").setDesc(
      `If enabled, duplicate number will always be added to the image name. Otherwise, it will only be added when the name is duplicated.`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.dupNumberAlways).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberAlways = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Auto rename").setDesc(
      `By default, the rename modal will always be shown to confirm before renaming, if this option is set, the image will be auto renamed after pasting.`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoRename).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.autoRename = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Handle all attachments").setDesc(
      `By default, the plugin only handles images that starts with "Pasted image " in name,
			which is the prefix Obsidian uses to create images from pasted content.
			If this option is set, the plugin will handle all attachments that are created in the vault.`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.handleAllAttachments).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.handleAllAttachments = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Exclude extension pattern").setDesc(
      `This option is only useful when "Handle all attachments" is enabled.
			Write a Regex pattern to exclude certain extensions from being handled. Only the first line will be used.`
    ).setClass("single-line-textarea").addTextArea(
      (text) => text.setPlaceholder("docx?|xlsx?|pptx?|zip|rar").setValue(this.plugin.settings.excludeExtensionPattern).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.excludeExtensionPattern = value;
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(containerEl).setName("Disable rename notice").setDesc(
      `Turn off this option if you don't want to see the notice when renaming images.
			Note that Obsidian may display a notice when a link has changed, this option cannot disable that.`
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.disableRenameNotice).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.disableRenameNotice = value;
        yield this.plugin.saveSettings();
      }))
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsicGFja2FnZS5qc29uIiwgInNyYy9tYWluLnRzIiwgInNyYy9iYXRjaC50cyIsICJzcmMvdXRpbHMudHMiLCAic3JjL3RlbXBsYXRlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJ7XHJcbiAgICBcIm5hbWVcIjogXCJvYnNpZGlhbi1wYXN0ZS1pbWFnZS1yZW5hbWVcIixcclxuICAgIFwidmVyc2lvblwiOiBcIjEuNi4xXCIsXHJcbiAgICBcIm1haW5cIjogXCJtYWluLmpzXCIsXHJcbiAgICBcInNjcmlwdHNcIjoge1xyXG4gICAgICAgIFwiZGV2XCI6IFwibm9kZSBlc2J1aWxkLmNvbmZpZy5tanNcIixcclxuICAgICAgICBcImJ1aWxkXCI6IFwidHNjIC1ub0VtaXQgLXNraXBMaWJDaGVjayAmJiBub2RlIGVzYnVpbGQuY29uZmlnLm1qcyBwcm9kdWN0aW9uXCIsXHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwibm9kZSB2ZXJzaW9uLWJ1bXAubWpzICYmIGdpdCBhZGQgbWFuaWZlc3QuanNvbiB2ZXJzaW9ucy5qc29uXCIsXHJcbiAgICAgICAgXCJyZWxlYXNlXCI6IFwibnBtIHJ1biBidWlsZCAmJiBnaCByZWxlYXNlIGNyZWF0ZSAke25wbV9wYWNrYWdlX3ZlcnNpb259IGJ1aWxkLypcIlxyXG4gICAgfSxcclxuICAgIFwia2V5d29yZHNcIjogW10sXHJcbiAgICBcImF1dGhvclwiOiBcIlJlb3J4XCIsXHJcbiAgICBcImxpY2Vuc2VcIjogXCJNSVRcIixcclxuICAgIFwiZGV2RGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcIkB0eXBlcy9ub2RlXCI6IFwiXjE4LjExLjE4XCIsXHJcbiAgICAgICAgXCJAdHlwZXNjcmlwdC1lc2xpbnQvZXNsaW50LXBsdWdpblwiOiBcIl41LjQ5LjBcIixcclxuICAgICAgICBcIkB0eXBlc2NyaXB0LWVzbGludC9wYXJzZXJcIjogXCJeNS40OS4wXCIsXHJcbiAgICAgICAgXCJidWlsdGluLW1vZHVsZXNcIjogXCJeMy4zLjBcIixcclxuICAgICAgICBcImVzYnVpbGRcIjogXCIwLjE2LjE3XCIsXHJcbiAgICAgICAgXCJvYnNpZGlhblwiOiBcIl4xLjEuMVwiLFxyXG4gICAgICAgIFwidHNsaWJcIjogXCIyLjUuMFwiLFxyXG4gICAgICAgIFwidHlwZXNjcmlwdFwiOiBcIjQuOS40XCJcclxuICAgIH0sXHJcbiAgICBcImRlcGVuZGVuY2llc1wiOiB7XHJcbiAgICAgICAgXCJjYXNoLWRvbVwiOiBcIl44LjEuMlwiXHJcbiAgICB9XHJcbn1cclxuIiwgIi8qIFRPRE9zOlxyXG4gKiAtIFt4XSBjaGVjayBuYW1lIGV4aXN0ZW5jZSB3aGVuIHNhdmluZ1xyXG4gKiAtIFt4XSBpbWFnZU5hbWVLZXkgaW4gZnJvbnRtYXR0ZXJcclxuICogLSBbeF0gYWZ0ZXIgcmVuYW1pbmcsIGN1cnNvciBzaG91bGQgYmUgcGxhY2VkIGFmdGVyIHRoZSBpbWFnZSBmaWxlIGxpbmtcclxuICogLSBbeF0gaGFuZGxlIGltYWdlIGluc2VydCBmcm9tIGRyYWcnbiBkcm9wXHJcbiAqIC0gWyBdIHNlbGVjdCB0ZXh0IHdoZW4gb3BlbmluZyB0aGUgcmVuYW1pbmcgbW9kYWwsIG1ha2UgdGhpcyBhbiBvcHRpb25cclxuICogLSBbIF0gYWRkIGJ1dHRvbiBmb3IgdXNlIHRoZSBjdXJyZW50IGZpbGUgbmFtZSwgaW1hZ2VOYW1lS2V5LCBsYXN0IGlucHV0IG5hbWUsXHJcbiAqICAgICAgIHNlZ21lbnRzIG9mIGxhc3QgaW5wdXQgbmFtZVxyXG4gKiAtIFt4XSBiYXRjaCByZW5hbWUgYWxsIHBhc3RlZCBpbWFnZXMgaW4gYSBmaWxlXHJcbiAqIC0gWyBdIGFkZCBydWxlcyBmb3IgbW92aW5nIG1hdGNoZWQgaW1hZ2VzIHRvIGRlc3RpbmF0aW9uIGZvbGRlclxyXG4gKi9cclxuaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0SGVhZGluZ0NhY2hlLFxyXG5cdE1hcmtkb3duVmlldyxcclxuXHRNb2RhbCxcclxuXHROb3RpY2UsXHJcblx0UGx1Z2luLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsXHJcblx0U2V0dGluZyxcclxuXHRUQWJzdHJhY3RGaWxlLFxyXG5cdFRGaWxlLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuaW1wb3J0IHsgSW1hZ2VCYXRjaFJlbmFtZU1vZGFsIH0gZnJvbSBcIi4vYmF0Y2hcIjtcclxuaW1wb3J0IHsgcmVuZGVyVGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xyXG5pbXBvcnQge1xyXG5cdGNyZWF0ZUVsZW1lbnRUcmVlLFxyXG5cdERFQlVHLFxyXG5cdGRlYnVnTG9nLFxyXG5cdGVzY2FwZVJlZ0V4cCxcclxuXHRsb2NrSW5wdXRNZXRob2RDb21wb3NpdGlvbixcclxuXHROYW1lT2JqLFxyXG5cdHBhdGgsXHJcblx0c2FuaXRpemVyLFxyXG59IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xyXG5cdC8vIHt7aW1hZ2VOYW1lS2V5fX0te3tEQVRFOllZWVlNTUREfX1cclxuXHRpbWFnZU5hbWVQYXR0ZXJuOiBzdHJpbmc7XHJcblx0ZHVwTnVtYmVyQXRTdGFydDogYm9vbGVhbjtcclxuXHRhdXRvX3Jlc2l6ZTogYm9vbGVhbjtcclxuXHRkdXBOdW1iZXJEZWxpbWl0ZXI6IHN0cmluZztcclxuXHRyZXNpemVfcGF0dGVybjogc3RyaW5nO1xyXG5cdGR1cE51bWJlckFsd2F5czogYm9vbGVhbjtcclxuXHRhdXRvUmVuYW1lOiBib29sZWFuO1xyXG5cdGhhbmRsZUFsbEF0dGFjaG1lbnRzOiBib29sZWFuO1xyXG5cdGV4Y2x1ZGVFeHRlbnNpb25QYXR0ZXJuOiBzdHJpbmc7XHJcblx0ZGlzYWJsZVJlbmFtZU5vdGljZTogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0aW1hZ2VOYW1lUGF0dGVybjogXCJ7e2ZpbGVOYW1lfX1cIixcclxuXHRkdXBOdW1iZXJBdFN0YXJ0OiBmYWxzZSxcclxuXHRhdXRvX3Jlc2l6ZTogZmFsc2UsXHJcblx0ZHVwTnVtYmVyRGVsaW1pdGVyOiBcIi1cIixcclxuXHRyZXNpemVfcGF0dGVybjogXCJ8NjAwXCIsXHJcblx0ZHVwTnVtYmVyQWx3YXlzOiBmYWxzZSxcclxuXHRhdXRvUmVuYW1lOiBmYWxzZSxcclxuXHRoYW5kbGVBbGxBdHRhY2htZW50czogZmFsc2UsXHJcblx0ZXhjbHVkZUV4dGVuc2lvblBhdHRlcm46IFwiXCIsXHJcblx0ZGlzYWJsZVJlbmFtZU5vdGljZTogZmFsc2UsXHJcbn07XHJcblxyXG5jb25zdCBQQVNURURfSU1BR0VfUFJFRklYID0gXCJQYXN0ZWQgaW1hZ2UgXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXN0ZUltYWdlUmVuYW1lUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogUGx1Z2luU2V0dGluZ3M7XHJcblx0bW9kYWxzOiBNb2RhbFtdID0gW107XHJcblx0ZXhjbHVkZUV4dGVuc2lvblJlZ2V4OiBSZWdFeHA7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXHJcblx0XHRjb25zdCBwa2cgPSByZXF1aXJlKFwiLi4vcGFja2FnZS5qc29uXCIpO1xyXG5cdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdGBQbHVnaW4gbG9hZGluZzogJHtwa2cubmFtZX0gJHtwa2cudmVyc2lvbn0gQlVJTERfRU5WPSR7cHJvY2Vzcy5lbnYuQlVJTERfRU5WfWBcclxuXHRcdCk7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgKGZpbGUpID0+IHtcclxuXHRcdFx0XHQvLyBkZWJ1Z0xvZygnZmlsZSBjcmVhdGVkJywgZmlsZSlcclxuXHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3QgdGltZUdhcE1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBmaWxlLnN0YXQuY3RpbWU7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIGZpbGUgaXMgY3JlYXRlZCBtb3JlIHRoYW4gMSBzZWNvbmQgYWdvLCB0aGUgZXZlbnQgaXMgbW9zdCBsaWtlbHkgYmUgZmlyZWQgb24gdmF1bHQgaW5pdGlhbGl6YXRpb24gd2hlbiBzdGFydGluZyBPYnNpZGlhbiBhcHAsIGlnbm9yZSBpdFxyXG5cdFx0XHRcdGlmICh0aW1lR2FwTXMgPiAxMDAwKSByZXR1cm47XHJcblx0XHRcdFx0Ly8gYWx3YXlzIGlnbm9yZSBtYXJrZG93biBmaWxlIGNyZWF0aW9uXHJcblx0XHRcdFx0aWYgKGlzTWFya2Rvd25GaWxlKGZpbGUpKSByZXR1cm47XHJcblx0XHRcdFx0aWYgKGlzUGFzdGVkSW1hZ2UoZmlsZSkpIHtcclxuXHRcdFx0XHRcdGRlYnVnTG9nKFwicGFzdGVkIGltYWdlIGNyZWF0ZWRcIiwgZmlsZSk7XHJcblx0XHRcdFx0XHR0aGlzLnN0YXJ0UmVuYW1lUHJvY2VzcyhmaWxlLCB0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oYW5kbGVBbGxBdHRhY2htZW50cykge1xyXG5cdFx0XHRcdFx0XHRkZWJ1Z0xvZyhcImhhbmRsZUFsbEF0dGFjaG1lbnRzIGZvciBmaWxlXCIsIGZpbGUpO1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy50ZXN0RXhjbHVkZUV4dGVuc2lvbihmaWxlKSkge1xyXG5cdFx0XHRcdFx0XHRcdGRlYnVnTG9nKFwiZXhjbHVkZWQgZmlsZSBieSBleHRcIiwgZmlsZSk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMuc3RhcnRSZW5hbWVQcm9jZXNzKGZpbGUsIHRoaXMuc2V0dGluZ3MuYXV0b1JlbmFtZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHJcblx0XHRjb25zdCBzdGFydEJhdGNoUmVuYW1lUHJvY2VzcyA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5vcGVuQmF0Y2hSZW5hbWVNb2RhbCgpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImJhdGNoLXJlbmFtZS1lbWJlZGVkLWZpbGVzXCIsXHJcblx0XHRcdG5hbWU6IFwiQmF0Y2ggcmVuYW1lIGVtYmVkZWQgZmlsZXMgKGluIHRoZSBjdXJyZW50IGZpbGUpXCIsXHJcblx0XHRcdGNhbGxiYWNrOiBzdGFydEJhdGNoUmVuYW1lUHJvY2VzcyxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKERFQlVHKSB7XHJcblx0XHRcdHRoaXMuYWRkUmliYm9uSWNvbihcclxuXHRcdFx0XHRcIndhbmQtZ2x5cGhcIixcclxuXHRcdFx0XHRcIkJhdGNoIHJlbmFtZSBlbWJlZGVkIGZpbGVzXCIsXHJcblx0XHRcdFx0c3RhcnRCYXRjaFJlbmFtZVByb2Nlc3NcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBiYXRjaFJlbmFtZUFsbEltYWdlcyA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5iYXRjaFJlbmFtZUFsbEltYWdlcygpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImJhdGNoLXJlbmFtZS1hbGwtaW1hZ2VzXCIsXHJcblx0XHRcdG5hbWU6IFwiQmF0Y2ggcmVuYW1lIGFsbCBpbWFnZXMgaW5zdGFudGx5IChpbiB0aGUgY3VycmVudCBmaWxlKVwiLFxyXG5cdFx0XHRjYWxsYmFjazogYmF0Y2hSZW5hbWVBbGxJbWFnZXMsXHJcblx0XHR9KTtcclxuXHRcdGlmIChERUJVRykge1xyXG5cdFx0XHR0aGlzLmFkZFJpYmJvbkljb24oXHJcblx0XHRcdFx0XCJ3YW5kLWdseXBoXCIsXHJcblx0XHRcdFx0XCJCYXRjaCByZW5hbWUgYWxsIGltYWdlcyBpbnN0YW50bHkgKGluIHRoZSBjdXJyZW50IGZpbGUpXCIsXHJcblx0XHRcdFx0YmF0Y2hSZW5hbWVBbGxJbWFnZXNcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBhZGQgc2V0dGluZ3MgdGFiXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHN0YXJ0UmVuYW1lUHJvY2VzcyhmaWxlOiBURmlsZSwgYXV0b1JlbmFtZSA9IGZhbHNlKSB7XHJcblx0XHQvLyBnZXQgYWN0aXZlIGZpbGUgZmlyc3RcclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiRXJyb3I6IE5vIGFjdGl2ZSBmaWxlIGZvdW5kLlwiKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHsgc3RlbSwgbmV3TmFtZSwgaXNNZWFuaW5nZnVsIH0gPSB0aGlzLmdlbmVyYXRlTmV3TmFtZShcclxuXHRcdFx0ZmlsZSxcclxuXHRcdFx0YWN0aXZlRmlsZVxyXG5cdFx0KTtcclxuXHRcdGRlYnVnTG9nKFwiZ2VuZXJhdGVkIG5ld05hbWU6XCIsIG5ld05hbWUsIGlzTWVhbmluZ2Z1bCk7XHJcblxyXG5cdFx0aWYgKCFpc01lYW5pbmdmdWwgfHwgIWF1dG9SZW5hbWUpIHtcclxuXHRcdFx0dGhpcy5vcGVuUmVuYW1lTW9kYWwoXHJcblx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRpc01lYW5pbmdmdWwgPyBzdGVtIDogXCJcIixcclxuXHRcdFx0XHRhY3RpdmVGaWxlLnBhdGhcclxuXHRcdFx0KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZW5hbWVGaWxlKGZpbGUsIG5ld05hbWUsIGFjdGl2ZUZpbGUucGF0aCwgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZW5hbWVGaWxlKFxyXG5cdFx0ZmlsZTogVEZpbGUsXHJcblx0XHRpbnB1dE5ld05hbWU6IHN0cmluZyxcclxuXHRcdHNvdXJjZVBhdGg6IHN0cmluZyxcclxuXHRcdHJlcGxhY2VDdXJyZW50TGluZT86IGJvb2xlYW5cclxuXHQpIHtcclxuXHRcdC8vIGRlZHVwbGljYXRlIG5hbWVcclxuXHRcdGNvbnN0IHsgbmFtZTogbmV3TmFtZSB9ID0gYXdhaXQgdGhpcy5kZWR1cGxpY2F0ZU5ld05hbWUoXHJcblx0XHRcdGlucHV0TmV3TmFtZSxcclxuXHRcdFx0ZmlsZVxyXG5cdFx0KTtcclxuXHRcdGRlYnVnTG9nKFwiZGVkdXBsaWNhdGVkIG5ld05hbWU6XCIsIG5ld05hbWUpO1xyXG5cdFx0Y29uc3Qgb3JpZ2luTmFtZSA9IGZpbGUubmFtZTtcclxuXHJcblx0XHQvLyBnZW5lcmF0ZSBsaW5rVGV4dCB1c2luZyBPYnNpZGlhbiBBUEksIGxpbmtUZXh0IGlzIGVpdGhlciAgIVtdKGZpbGVuYW1lLnBuZykgb3IgIVtbZmlsZW5hbWUucG5nXV0gYWNjb3JkaW5nIHRvIHRoZSBcIlVzZSBbW1dpa2lsaW5rc11dXCIgc2V0dGluZy5cclxuXHRcdGNvbnN0IGxpbmtUZXh0ID0gdGhpcy5hcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoXHJcblx0XHRcdGZpbGUsXHJcblx0XHRcdHNvdXJjZVBhdGhcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gZmlsZSBzeXN0ZW0gb3BlcmF0aW9uOiByZW5hbWUgdGhlIGZpbGVcclxuXHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoLmpvaW4oZmlsZS5wYXJlbnQucGF0aCwgbmV3TmFtZSk7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0fSBjYXRjaCAoZXJyKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgJHtuZXdOYW1lfTogJHtlcnJ9YCk7XHJcblx0XHRcdHRocm93IGVycjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXJlcGxhY2VDdXJyZW50TGluZSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaW4gY2FzZSBmaWxlTWFuYWdlci5yZW5hbWVGaWxlIG1heSBub3QgdXBkYXRlIHRoZSBpbnRlcm5hbCBsaW5rIGluIHRoZSBhY3RpdmUgZmlsZSxcclxuXHRcdC8vIHdlIG1hbnVhbGx5IHJlcGxhY2UgdGhlIGN1cnJlbnQgbGluZSBieSBtYW5pcHVsYXRpbmcgdGhlIGVkaXRvclxyXG5cclxuXHRcdGNvbnN0IG5ld0xpbmtUZXh0ID0gdGhpcy5hcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoXHJcblx0XHRcdGZpbGUsXHJcblx0XHRcdHNvdXJjZVBhdGhcclxuXHRcdCk7XHJcblx0XHRkZWJ1Z0xvZyhcInJlcGxhY2UgdGV4dFwiLCBsaW5rVGV4dCwgbmV3TGlua1RleHQpO1xyXG5cclxuXHRcdGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcblx0XHRpZiAoIWVkaXRvcikge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gcmVuYW1lICR7bmV3TmFtZX06IG5vIGFjdGl2ZSBlZGl0b3JgKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XHJcblxyXG5cdFx0dmFyIHJlcGxhY2VkTGluZSA9IFwiXCI7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvX3Jlc2l6ZSkge1xyXG5cdFx0XHRjb25zdCByZXNpemVkX2xpbmVfdGV4dCA9IGAke25ld0xpbmtUZXh0LnNsaWNlKDAsIC0yKX0ke1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MucmVzaXplX3BhdHRlcm5cclxuXHRcdFx0fSR7bmV3TGlua1RleHQuc2xpY2UoLTIpfWA7XHJcblx0XHRcdHJlcGxhY2VkTGluZSA9IGxpbmUucmVwbGFjZShsaW5rVGV4dCwgcmVzaXplZF9saW5lX3RleHQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVwbGFjZWRMaW5lID0gbGluZS5yZXBsYWNlKGxpbmtUZXh0LCBuZXdMaW5rVGV4dCk7XHJcblx0XHR9XHJcblx0XHRkZWJ1Z0xvZyhcImN1cnJlbnQgbGluZSAtPiByZXBsYWNlZCBsaW5lXCIsIGxpbmUsIHJlcGxhY2VkTGluZSk7XHJcblx0XHQvLyBjb25zb2xlLmxvZygnZWRpdG9yIGNvbnRleHQnLCBjdXJzb3IsIClcclxuXHRcdGVkaXRvci50cmFuc2FjdGlvbih7XHJcblx0XHRcdGNoYW5nZXM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRmcm9tOiB7IC4uLmN1cnNvciwgY2g6IDAgfSxcclxuXHRcdFx0XHRcdHRvOiB7IC4uLmN1cnNvciwgY2g6IGxpbmUubGVuZ3RoIH0sXHJcblx0XHRcdFx0XHR0ZXh0OiByZXBsYWNlZExpbmUsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYFJlbmFtZWQgJHtvcmlnaW5OYW1lfSB0byAke25ld05hbWV9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvcGVuUmVuYW1lTW9kYWwoZmlsZTogVEZpbGUsIG5ld05hbWU6IHN0cmluZywgc291cmNlUGF0aDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBJbWFnZVJlbmFtZU1vZGFsKFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0ZmlsZSBhcyBURmlsZSxcclxuXHRcdFx0bmV3TmFtZSxcclxuXHRcdFx0KGNvbmZpcm1lZE5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdGRlYnVnTG9nKFwiY29uZmlybWVkTmFtZTpcIiwgY29uZmlybWVkTmFtZSk7XHJcblx0XHRcdFx0dGhpcy5yZW5hbWVGaWxlKGZpbGUsIGNvbmZpcm1lZE5hbWUsIHNvdXJjZVBhdGgsIHRydWUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5tb2RhbHMuc3BsaWNlKHRoaXMubW9kYWxzLmluZGV4T2YobW9kYWwpLCAxKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdHRoaXMubW9kYWxzLnB1c2gobW9kYWwpO1xyXG5cdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0ZGVidWdMb2coXCJtb2RhbHMgY291bnRcIiwgdGhpcy5tb2RhbHMubGVuZ3RoKTtcclxuXHR9XHJcblxyXG5cdG9wZW5CYXRjaFJlbmFtZU1vZGFsKCkge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgSW1hZ2VCYXRjaFJlbmFtZU1vZGFsKFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0YXN5bmMgKGZpbGU6IFRGaWxlLCBuYW1lOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnJlbmFtZUZpbGUoZmlsZSwgbmFtZSwgYWN0aXZlRmlsZS5wYXRoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMubW9kYWxzLnNwbGljZSh0aGlzLm1vZGFscy5pbmRleE9mKG1vZGFsKSwgMSk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0XHR0aGlzLm1vZGFscy5wdXNoKG1vZGFsKTtcclxuXHRcdG1vZGFsLm9wZW4oKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGJhdGNoUmVuYW1lQWxsSW1hZ2VzKCkge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0Y29uc3QgZmlsZUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XHJcblx0XHRpZiAoIWZpbGVDYWNoZSB8fCAhZmlsZUNhY2hlLmVtYmVkcykgcmV0dXJuO1xyXG5cdFx0Y29uc3QgZXh0UGF0dGVyblJlZ2V4ID0gL2pwZT9nfHBuZ3xnaWZ8dGlmZnx3ZWJwL2k7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBlbWJlZCBvZiBmaWxlQ2FjaGUuZW1iZWRzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KFxyXG5cdFx0XHRcdGVtYmVkLmxpbmssXHJcblx0XHRcdFx0YWN0aXZlRmlsZS5wYXRoXHJcblx0XHRcdCk7XHJcblx0XHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcImZpbGUgbm90IGZvdW5kXCIsIGVtYmVkLmxpbmspO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBtYXRjaCBleHRcclxuXHRcdFx0Y29uc3QgbTAgPSBleHRQYXR0ZXJuUmVnZXguZXhlYyhmaWxlLmV4dGVuc2lvbik7XHJcblx0XHRcdGlmICghbTApIHJldHVybjtcclxuXHJcblx0XHRcdC8vIHJlbmFtZVxyXG5cdFx0XHRjb25zdCB7IG5ld05hbWUsIGlzTWVhbmluZ2Z1bCB9ID0gdGhpcy5nZW5lcmF0ZU5ld05hbWUoXHJcblx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRhY3RpdmVGaWxlXHJcblx0XHRcdCk7XHJcblx0XHRcdGRlYnVnTG9nKFwiZ2VuZXJhdGVkIG5ld05hbWU6XCIsIG5ld05hbWUsIGlzTWVhbmluZ2Z1bCk7XHJcblx0XHRcdGlmICghaXNNZWFuaW5nZnVsKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZShcclxuXHRcdFx0XHRcdFwiRmFpbGVkIHRvIGJhdGNoIHJlbmFtZSBpbWFnZXM6IHRoZSBnZW5lcmF0ZWQgbmFtZSBpcyBub3QgbWVhbmluZ2Z1bFwiXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YXdhaXQgdGhpcy5yZW5hbWVGaWxlKGZpbGUsIG5ld05hbWUsIGFjdGl2ZUZpbGUucGF0aCwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gcmV0dXJucyBhIG5ldyBuYW1lIGZvciB0aGUgaW5wdXQgZmlsZSwgd2l0aCBleHRlbnNpb25cclxuXHRnZW5lcmF0ZU5ld05hbWUoZmlsZTogVEZpbGUsIGFjdGl2ZUZpbGU6IFRGaWxlKSB7XHJcblx0XHRsZXQgaW1hZ2VOYW1lS2V5ID0gXCJcIjtcclxuXHRcdGxldCBmaXJzdEhlYWRpbmcgPSBcIlwiO1xyXG5cdFx0bGV0IGZyb250bWF0dGVyO1xyXG5cdFx0Y29uc3QgZmlsZUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XHJcblx0XHRpZiAoZmlsZUNhY2hlKSB7XHJcblx0XHRcdGRlYnVnTG9nKFwiZnJvbnRtYXR0ZXJcIiwgZmlsZUNhY2hlLmZyb250bWF0dGVyKTtcclxuXHRcdFx0ZnJvbnRtYXR0ZXIgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI7XHJcblx0XHRcdGltYWdlTmFtZUtleSA9IGZyb250bWF0dGVyPy5pbWFnZU5hbWVLZXkgfHwgXCJcIjtcclxuXHRcdFx0Zmlyc3RIZWFkaW5nID0gZ2V0Rmlyc3RIZWFkaW5nKGZpbGVDYWNoZS5oZWFkaW5ncyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oXHJcblx0XHRcdFx0XCJjb3VsZCBub3QgZ2V0IGZpbGUgY2FjaGUgZnJvbSBhY3RpdmUgZmlsZVwiLFxyXG5cdFx0XHRcdGFjdGl2ZUZpbGUubmFtZVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN0ZW0gPSByZW5kZXJUZW1wbGF0ZShcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5pbWFnZU5hbWVQYXR0ZXJuLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW1hZ2VOYW1lS2V5LFxyXG5cdFx0XHRcdGZpbGVOYW1lOiBhY3RpdmVGaWxlLmJhc2VuYW1lLFxyXG5cdFx0XHRcdGRpck5hbWU6IGFjdGl2ZUZpbGUucGFyZW50Lm5hbWUsXHJcblx0XHRcdFx0Zmlyc3RIZWFkaW5nLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRmcm9udG1hdHRlclxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IG1lYW5pbmdsZXNzUmVnZXggPSBuZXcgUmVnRXhwKFxyXG5cdFx0XHRgWyR7dGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXJ9XFxcXHNdYCxcclxuXHRcdFx0XCJnbVwiXHJcblx0XHQpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHN0ZW0sXHJcblx0XHRcdG5ld05hbWU6IHN0ZW0gKyBcIi5cIiArIGZpbGUuZXh0ZW5zaW9uLFxyXG5cdFx0XHRpc01lYW5pbmdmdWw6IHN0ZW0ucmVwbGFjZShtZWFuaW5nbGVzc1JlZ2V4LCBcIlwiKSAhPT0gXCJcIixcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvLyBuZXdOYW1lOiBmb28uZXh0XHJcblx0YXN5bmMgZGVkdXBsaWNhdGVOZXdOYW1lKG5ld05hbWU6IHN0cmluZywgZmlsZTogVEZpbGUpOiBQcm9taXNlPE5hbWVPYmo+IHtcclxuXHRcdC8vIGxpc3QgZmlsZXMgaW4gZGlyXHJcblx0XHRjb25zdCBkaXIgPSBmaWxlLnBhcmVudC5wYXRoO1xyXG5cdFx0Y29uc3QgbGlzdGVkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KGRpcik7XHJcblx0XHRkZWJ1Z0xvZyhcInNpYmxpbmcgZmlsZXNcIiwgbGlzdGVkKTtcclxuXHJcblx0XHQvLyBwYXJzZSBuZXdOYW1lXHJcblx0XHRjb25zdCBuZXdOYW1lRXh0ID0gcGF0aC5leHRlbnNpb24obmV3TmFtZSksXHJcblx0XHRcdG5ld05hbWVTdGVtID0gbmV3TmFtZS5zbGljZShcclxuXHRcdFx0XHQwLFxyXG5cdFx0XHRcdG5ld05hbWUubGVuZ3RoIC0gbmV3TmFtZUV4dC5sZW5ndGggLSAxXHJcblx0XHRcdCksXHJcblx0XHRcdG5ld05hbWVTdGVtRXNjYXBlZCA9IGVzY2FwZVJlZ0V4cChuZXdOYW1lU3RlbSksXHJcblx0XHRcdGRlbGltaXRlciA9IHRoaXMuc2V0dGluZ3MuZHVwTnVtYmVyRGVsaW1pdGVyLFxyXG5cdFx0XHRkZWxpbWl0ZXJFc2NhcGVkID0gZXNjYXBlUmVnRXhwKGRlbGltaXRlcik7XHJcblxyXG5cdFx0bGV0IGR1cE5hbWVSZWdleDtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQpIHtcclxuXHRcdFx0ZHVwTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcclxuXHRcdFx0XHRgXig/PG51bWJlcj5cXFxcZCspJHtkZWxpbWl0ZXJFc2NhcGVkfSg/PG5hbWU+JHtuZXdOYW1lU3RlbUVzY2FwZWR9KVxcXFwuJHtuZXdOYW1lRXh0fSRgXHJcblx0XHRcdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkdXBOYW1lUmVnZXggPSBuZXcgUmVnRXhwKFxyXG5cdFx0XHRcdGBeKD88bmFtZT4ke25ld05hbWVTdGVtRXNjYXBlZH0pJHtkZWxpbWl0ZXJFc2NhcGVkfSg/PG51bWJlcj5cXFxcZCspXFxcXC4ke25ld05hbWVFeHR9JGBcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdGRlYnVnTG9nKFwiZHVwTmFtZVJlZ2V4XCIsIGR1cE5hbWVSZWdleCk7XHJcblxyXG5cdFx0Y29uc3QgZHVwTmFtZU51bWJlcnM6IG51bWJlcltdID0gW107XHJcblx0XHRsZXQgaXNOZXdOYW1lRXhpc3QgPSBmYWxzZTtcclxuXHRcdGZvciAobGV0IHNpYmxpbmcgb2YgbGlzdGVkLmZpbGVzKSB7XHJcblx0XHRcdHNpYmxpbmcgPSBwYXRoLmJhc2VuYW1lKHNpYmxpbmcpO1xyXG5cdFx0XHRpZiAoc2libGluZyA9PSBuZXdOYW1lKSB7XHJcblx0XHRcdFx0aXNOZXdOYW1lRXhpc3QgPSB0cnVlO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBtYXRjaCBkdXBOYW1lc1xyXG5cdFx0XHRjb25zdCBtID0gZHVwTmFtZVJlZ2V4LmV4ZWMoc2libGluZyk7XHJcblx0XHRcdGlmICghbSkgY29udGludWU7XHJcblx0XHRcdC8vIHBhcnNlIGludCBmb3IgbS5ncm91cHMubnVtYmVyXHJcblx0XHRcdGR1cE5hbWVOdW1iZXJzLnB1c2gocGFyc2VJbnQobS5ncm91cHMubnVtYmVyKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGlzTmV3TmFtZUV4aXN0IHx8IHRoaXMuc2V0dGluZ3MuZHVwTnVtYmVyQWx3YXlzKSB7XHJcblx0XHRcdC8vIGdldCBtYXggbnVtYmVyXHJcblx0XHRcdGNvbnN0IG5ld051bWJlciA9XHJcblx0XHRcdFx0ZHVwTmFtZU51bWJlcnMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLmR1cE5hbWVOdW1iZXJzKSArIDEgOiAxO1xyXG5cdFx0XHQvLyBjaGFuZ2UgbmV3TmFtZVxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJBdFN0YXJ0KSB7XHJcblx0XHRcdFx0bmV3TmFtZSA9IGAke25ld051bWJlcn0ke2RlbGltaXRlcn0ke25ld05hbWVTdGVtfS4ke25ld05hbWVFeHR9YDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXdOYW1lID0gYCR7bmV3TmFtZVN0ZW19JHtkZWxpbWl0ZXJ9JHtuZXdOdW1iZXJ9LiR7bmV3TmFtZUV4dH1gO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bmFtZTogbmV3TmFtZSxcclxuXHRcdFx0c3RlbTogbmV3TmFtZS5zbGljZSgwLCBuZXdOYW1lLmxlbmd0aCAtIG5ld05hbWVFeHQubGVuZ3RoIC0gMSksXHJcblx0XHRcdGV4dGVuc2lvbjogbmV3TmFtZUV4dCxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRnZXRBY3RpdmVGaWxlKCkge1xyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRjb25zdCBmaWxlID0gdmlldz8uZmlsZTtcclxuXHRcdGRlYnVnTG9nKFwiYWN0aXZlIGZpbGVcIiwgZmlsZT8ucGF0aCk7XHJcblx0XHRyZXR1cm4gZmlsZTtcclxuXHR9XHJcblx0Z2V0QWN0aXZlRWRpdG9yKCkge1xyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRyZXR1cm4gdmlldz8uZWRpdG9yO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHR0aGlzLm1vZGFscy5tYXAoKG1vZGFsKSA9PiBtb2RhbC5jbG9zZSgpKTtcclxuXHR9XHJcblxyXG5cdHRlc3RFeGNsdWRlRXh0ZW5zaW9uKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBwYXR0ZXJuID0gdGhpcy5zZXR0aW5ncy5leGNsdWRlRXh0ZW5zaW9uUGF0dGVybjtcclxuXHRcdGlmICghcGF0dGVybikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0cmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybikudGVzdChmaWxlLmV4dGVuc2lvbik7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcclxuXHRcdFx0e30sXHJcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXHJcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaXJzdEhlYWRpbmcoaGVhZGluZ3M/OiBIZWFkaW5nQ2FjaGVbXSkge1xyXG5cdGlmIChoZWFkaW5ncyAmJiBoZWFkaW5ncy5sZW5ndGggPiAwKSB7XHJcblx0XHRmb3IgKGNvbnN0IGhlYWRpbmcgb2YgaGVhZGluZ3MpIHtcclxuXHRcdFx0aWYgKGhlYWRpbmcubGV2ZWwgPT09IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gaGVhZGluZy5oZWFkaW5nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBcIlwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1Bhc3RlZEltYWdlKGZpbGU6IFRBYnN0cmFjdEZpbGUpOiBib29sZWFuIHtcclxuXHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRpZiAoZmlsZS5uYW1lLnN0YXJ0c1dpdGgoUEFTVEVEX0lNQUdFX1BSRUZJWCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNNYXJrZG93bkZpbGUoZmlsZTogVEFic3RyYWN0RmlsZSk6IGJvb2xlYW4ge1xyXG5cdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdGlmIChmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmNvbnN0IElNQUdFX0VYVFMgPSBbXCJqcGdcIiwgXCJqcGVnXCIsIFwicG5nXCIsIFwiZ2lmXCIsIFwiYm1wXCIsIFwic3ZnXCJdO1xyXG5cclxuZnVuY3Rpb24gaXNJbWFnZShmaWxlOiBUQWJzdHJhY3RGaWxlKTogYm9vbGVhbiB7XHJcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0aWYgKElNQUdFX0VYVFMuY29udGFpbnMoZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuY2xhc3MgSW1hZ2VSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRzcmM6IFRGaWxlO1xyXG5cdHN0ZW06IHN0cmluZztcclxuXHRyZW5hbWVGdW5jOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cdG9uQ2xvc2VFeHRyYTogKCkgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHNyYzogVEZpbGUsXHJcblx0XHRzdGVtOiBzdHJpbmcsXHJcblx0XHRyZW5hbWVGdW5jOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkLFxyXG5cdFx0b25DbG9zZTogKCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuc3JjID0gc3JjO1xyXG5cdFx0dGhpcy5zdGVtID0gc3RlbTtcclxuXHRcdHRoaXMucmVuYW1lRnVuYyA9IHJlbmFtZUZ1bmM7XHJcblx0XHR0aGlzLm9uQ2xvc2VFeHRyYSA9IG9uQ2xvc2U7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwiaW1hZ2UtcmVuYW1lLW1vZGFsXCIpO1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwsIHRpdGxlRWwgfSA9IHRoaXM7XHJcblx0XHR0aXRsZUVsLnNldFRleHQoXCJSZW5hbWUgaW1hZ2VcIik7XHJcblxyXG5cdFx0Y29uc3QgaW1hZ2VDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcclxuXHRcdFx0Y2xzOiBcImltYWdlLWNvbnRhaW5lclwiLFxyXG5cdFx0fSk7XHJcblx0XHRpbWFnZUNvbnRhaW5lci5jcmVhdGVFbChcImltZ1wiLCB7XHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRzcmM6IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aCh0aGlzLnNyYyksXHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHRsZXQgc3RlbSA9IHRoaXMuc3RlbTtcclxuXHRcdGNvbnN0IGV4dCA9IHRoaXMuc3JjLmV4dGVuc2lvbjtcclxuXHRcdGNvbnN0IGdldE5ld05hbWUgPSAoc3RlbTogc3RyaW5nKSA9PiBzdGVtICsgXCIuXCIgKyBleHQ7XHJcblx0XHRjb25zdCBnZXROZXdQYXRoID0gKHN0ZW06IHN0cmluZykgPT5cclxuXHRcdFx0cGF0aC5qb2luKHRoaXMuc3JjLnBhcmVudC5wYXRoLCBnZXROZXdOYW1lKHN0ZW0pKTtcclxuXHJcblx0XHRjb25zdCBpbmZvRVQgPSBjcmVhdGVFbGVtZW50VHJlZShjb250ZW50RWwsIHtcclxuXHRcdFx0dGFnOiBcInVsXCIsXHJcblx0XHRcdGNsczogXCJpbmZvXCIsXHJcblx0XHRcdGNoaWxkcmVuOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGFnOiBcImxpXCIsXHJcblx0XHRcdFx0XHRjaGlsZHJlbjogW1xyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dGFnOiBcInNwYW5cIixcclxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBcIk9yaWdpbiBwYXRoXCIsXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR0YWc6IFwic3BhblwiLFxyXG5cdFx0XHRcdFx0XHRcdHRleHQ6IHRoaXMuc3JjLnBhdGgsXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRdLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGFnOiBcImxpXCIsXHJcblx0XHRcdFx0XHRjaGlsZHJlbjogW1xyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dGFnOiBcInNwYW5cIixcclxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBcIk5ldyBwYXRoXCIsXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR0YWc6IFwic3BhblwiLFxyXG5cdFx0XHRcdFx0XHRcdHRleHQ6IGdldE5ld1BhdGgoc3RlbSksXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRdLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdF0sXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBkb1JlbmFtZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0ZGVidWdMb2coXCJkb1JlbmFtZVwiLCBgc3RlbT0ke3N0ZW19YCk7XHJcblx0XHRcdHRoaXMucmVuYW1lRnVuYyhnZXROZXdOYW1lKHN0ZW0pKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgbmFtZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTmV3IG5hbWVcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJQbGVhc2UgaW5wdXQgdGhlIG5ldyBuYW1lIGZvciB0aGUgaW1hZ2UgKHdpdGhvdXQgZXh0ZW5zaW9uKVwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dC5zZXRWYWx1ZShzdGVtKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHN0ZW0gPSBzYW5pdGl6ZXIuZmlsZW5hbWUodmFsdWUpO1xyXG5cdFx0XHRcdFx0aW5mb0VULmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdLmVsLmlubmVyVGV4dCA9XHJcblx0XHRcdFx0XHRcdGdldE5ld1BhdGgoc3RlbSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRjb25zdCBuYW1lSW5wdXRFbCA9IG5hbWVTZXR0aW5nLmNvbnRyb2xFbFxyXG5cdFx0XHQuY2hpbGRyZW5bMF0gYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdG5hbWVJbnB1dEVsLmZvY3VzKCk7XHJcblx0XHRjb25zdCBuYW1lSW5wdXRTdGF0ZSA9IGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uKG5hbWVJbnB1dEVsKTtcclxuXHRcdG5hbWVJbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGFzeW5jIChlKSA9PiB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdrZXlkb3duJywgZS5rZXksIGBsb2NrPSR7bmFtZUlucHV0U3RhdGUubG9ja31gKVxyXG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhbmFtZUlucHV0U3RhdGUubG9jaykge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRpZiAoIXN0ZW0pIHtcclxuXHRcdFx0XHRcdGVycm9yRWwuaW5uZXJUZXh0ID0gJ0Vycm9yOiBcIk5ldyBuYW1lXCIgY291bGQgbm90IGJlIGVtcHR5JztcclxuXHRcdFx0XHRcdGVycm9yRWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZG9SZW5hbWUoKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcclxuXHRcdFx0Y2xzOiBcImVycm9yXCIsXHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRzdHlsZTogXCJkaXNwbGF5OiBub25lO1wiLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlJlbmFtZVwiKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdGRvUmVuYW1lKCk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0dGhpcy5vbkNsb3NlRXh0cmEoKTtcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGltYWdlTmFtZVBhdHRlcm5EZXNjID0gYFxyXG5UaGUgcGF0dGVybiBpbmRpY2F0ZXMgaG93IHRoZSBuZXcgbmFtZSBzaG91bGQgYmUgZ2VuZXJhdGVkLlxyXG5cclxuQXZhaWxhYmxlIHZhcmlhYmxlczpcclxuLSB7e2ZpbGVOYW1lfX06IG5hbWUgb2YgdGhlIGFjdGl2ZSBmaWxlLCB3aXRob3V0IFwiLm1kXCIgZXh0ZW5zaW9uLlxyXG4tIHt7ZGlyTmFtZX19OiBuYW1lIG9mIHRoZSBkaXJlY3Rvcnkgd2hpY2ggY29udGFpbnMgdGhlIGRvY3VtZW50ICh0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdmF1bHQgcmVzdWx0cyBpbiBhbiBlbXB0eSB2YXJpYWJsZSkuXHJcbi0ge3tpbWFnZU5hbWVLZXl9fTogdGhpcyB2YXJpYWJsZSBpcyByZWFkIGZyb20gdGhlIG1hcmtkb3duIGZpbGUncyBmcm9udG1hdHRlciwgZnJvbSB0aGUgc2FtZSBrZXkgXCJpbWFnZU5hbWVLZXlcIi5cclxuLSB7e0RBVEU6JEZPUk1BVH19OiB1c2UgXCIkRk9STUFUXCIgdG8gZm9ybWF0IHRoZSBjdXJyZW50IGRhdGUsIFwiJEZPUk1BVFwiIG11c3QgYmUgYSBNb21lbnQuanMgZm9ybWF0IHN0cmluZywgZS5nLiB7e0RBVEU6WVlZWS1NTS1ERH19LlxyXG5cclxuSGVyZSBhcmUgc29tZSBleGFtcGxlcyBmcm9tIHBhdHRlcm4gdG8gaW1hZ2UgbmFtZXMgKHJlcGVhdCBpbiBzZXF1ZW5jZSksIHZhcmlhYmxlczogZmlsZU5hbWUgPSBcIk15IG5vdGVcIiwgaW1hZ2VOYW1lS2V5ID0gXCJmb29cIjpcclxuLSB7e2ZpbGVOYW1lfX06IE15IG5vdGUsIE15IG5vdGUtMSwgTXkgbm90ZS0yXHJcbi0ge3tpbWFnZU5hbWVLZXl9fTogZm9vLCBmb28tMSwgZm9vLTJcclxuLSB7e2ltYWdlTmFtZUtleX19LXt7REFURTpZWVlZTU1ERH19OiBmb28tMjAyMjA0MDgsIGZvby0yMDIyMDQwOC0xLCBmb28tMjAyMjA0MDgtMlxyXG5gO1xyXG5cclxuY2xhc3MgU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogUGFzdGVJbWFnZVJlbmFtZVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGFzdGVJbWFnZVJlbmFtZVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiSW1hZ2UgbmFtZSBwYXR0ZXJuXCIpXHJcblx0XHRcdC5zZXREZXNjKGltYWdlTmFtZVBhdHRlcm5EZXNjKVxyXG5cdFx0XHQuc2V0Q2xhc3MoXCJsb25nLWRlc2NyaXB0aW9uLXNldHRpbmctaXRlbVwiKVxyXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJ7e2ltYWdlTmFtZUtleX19XCIpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW1hZ2VOYW1lUGF0dGVybilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW1hZ2VOYW1lUGF0dGVybiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRHVwbGljYXRlIG51bWJlciBhdCBzdGFydCAob3IgZW5kKVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgSWYgZW5hYmxlZCwgZHVwbGljYXRlIG51bWJlciB3aWxsIGJlIGFkZGVkIGF0IHRoZSBzdGFydCBhcyBwcmVmaXggZm9yIHRoZSBpbWFnZSBuYW1lLCBvdGhlcndpc2UgaXQgd2lsbCBiZSBhZGRlZCBhdCB0aGUgZW5kIGFzIHN1ZmZpeCBmb3IgdGhlIGltYWdlIG5hbWUuYFxyXG5cdFx0XHQpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBdFN0YXJ0KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBdFN0YXJ0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJhdXRvIHJlc2llemVcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0YElmIGVuYWJsZWQsIGF1dG8gcmVzaXplIHRoZSBpbWFnZSB0byBhIHNtYWxsZXIgc2l6ZSBpbiBlZGl0b3Igdmlld2VyYFxyXG5cdFx0XHQpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvX3Jlc2l6ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b19yZXNpemUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcInJlc2l6ZSBwYXR0ZXJuXCIpXHJcblx0XHRcdC5zZXREZXNjKGBkZWZhdWx0IHJlc2l6ZSBwYXR0ZXJuIGlzIFwifDYwMFwiYClcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2l6ZV9wYXR0ZXJuKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXNpemVfcGF0dGVybiA9XHJcblx0XHRcdFx0XHRcdFx0c2FuaXRpemVyLmRlbGltaXRlcih2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJEdXBsaWNhdGUgbnVtYmVyIGRlbGltaXRlclwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgVGhlIGRlbGltaXRlciB0byBnZW5lcmF0ZSB0aGUgbnVtYmVyIHByZWZpeC9zdWZmaXggZm9yIGR1cGxpY2F0ZWQgbmFtZXMuIEZvciBleGFtcGxlLCBpZiB0aGUgdmFsdWUgaXMgXCItXCIsIHRoZSBzdWZmaXggd2lsbCBiZSBsaWtlIFwiLTFcIiwgXCItMlwiLCBcIi0zXCIsIGFuZCB0aGUgcHJlZml4IHdpbGwgYmUgbGlrZSBcIjEtXCIsIFwiMi1cIiwgXCIzLVwiLiBPbmx5IGNoYXJhY3RlcnMgdGhhdCBhcmUgdmFsaWQgaW4gZmlsZSBuYW1lcyBhcmUgYWxsb3dlZC5gXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cE51bWJlckRlbGltaXRlcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwTnVtYmVyRGVsaW1pdGVyID1cclxuXHRcdFx0XHRcdFx0XHRzYW5pdGl6ZXIuZGVsaW1pdGVyKHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkFsd2F5cyBhZGQgZHVwbGljYXRlIG51bWJlclwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgSWYgZW5hYmxlZCwgZHVwbGljYXRlIG51bWJlciB3aWxsIGFsd2F5cyBiZSBhZGRlZCB0byB0aGUgaW1hZ2UgbmFtZS4gT3RoZXJ3aXNlLCBpdCB3aWxsIG9ubHkgYmUgYWRkZWQgd2hlbiB0aGUgbmFtZSBpcyBkdXBsaWNhdGVkLmBcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwTnVtYmVyQWx3YXlzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBbHdheXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkF1dG8gcmVuYW1lXCIpXHJcblx0XHRcdC5zZXREZXNjKFxyXG5cdFx0XHRcdGBCeSBkZWZhdWx0LCB0aGUgcmVuYW1lIG1vZGFsIHdpbGwgYWx3YXlzIGJlIHNob3duIHRvIGNvbmZpcm0gYmVmb3JlIHJlbmFtaW5nLCBpZiB0aGlzIG9wdGlvbiBpcyBzZXQsIHRoZSBpbWFnZSB3aWxsIGJlIGF1dG8gcmVuYW1lZCBhZnRlciBwYXN0aW5nLmBcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiSGFuZGxlIGFsbCBhdHRhY2htZW50c1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgQnkgZGVmYXVsdCwgdGhlIHBsdWdpbiBvbmx5IGhhbmRsZXMgaW1hZ2VzIHRoYXQgc3RhcnRzIHdpdGggXCJQYXN0ZWQgaW1hZ2UgXCIgaW4gbmFtZSxcclxuXHRcdFx0d2hpY2ggaXMgdGhlIHByZWZpeCBPYnNpZGlhbiB1c2VzIHRvIGNyZWF0ZSBpbWFnZXMgZnJvbSBwYXN0ZWQgY29udGVudC5cclxuXHRcdFx0SWYgdGhpcyBvcHRpb24gaXMgc2V0LCB0aGUgcGx1Z2luIHdpbGwgaGFuZGxlIGFsbCBhdHRhY2htZW50cyB0aGF0IGFyZSBjcmVhdGVkIGluIHRoZSB2YXVsdC5gXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhhbmRsZUFsbEF0dGFjaG1lbnRzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oYW5kbGVBbGxBdHRhY2htZW50cyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRXhjbHVkZSBleHRlbnNpb24gcGF0dGVyblwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgVGhpcyBvcHRpb24gaXMgb25seSB1c2VmdWwgd2hlbiBcIkhhbmRsZSBhbGwgYXR0YWNobWVudHNcIiBpcyBlbmFibGVkLlxyXG5cdFx0XHRXcml0ZSBhIFJlZ2V4IHBhdHRlcm4gdG8gZXhjbHVkZSBjZXJ0YWluIGV4dGVuc2lvbnMgZnJvbSBiZWluZyBoYW5kbGVkLiBPbmx5IHRoZSBmaXJzdCBsaW5lIHdpbGwgYmUgdXNlZC5gXHJcblx0XHRcdClcclxuXHRcdFx0LnNldENsYXNzKFwic2luZ2xlLWxpbmUtdGV4dGFyZWFcIilcclxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxyXG5cdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImRvY3g/fHhsc3g/fHBwdHg/fHppcHxyYXJcIilcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRXh0ZW5zaW9uUGF0dGVybilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUV4dGVuc2lvblBhdHRlcm4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkRpc2FibGUgcmVuYW1lIG5vdGljZVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgVHVybiBvZmYgdGhpcyBvcHRpb24gaWYgeW91IGRvbid0IHdhbnQgdG8gc2VlIHRoZSBub3RpY2Ugd2hlbiByZW5hbWluZyBpbWFnZXMuXHJcblx0XHRcdE5vdGUgdGhhdCBPYnNpZGlhbiBtYXkgZGlzcGxheSBhIG5vdGljZSB3aGVuIGEgbGluayBoYXMgY2hhbmdlZCwgdGhpcyBvcHRpb24gY2Fubm90IGRpc2FibGUgdGhhdC5gXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgTW9kYWwsIFRGaWxlLCBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQge1xyXG4gIHBhdGgsIGNyZWF0ZUVsZW1lbnRUcmVlLCBkZWJ1Z0xvZywgbG9ja0lucHV0TWV0aG9kQ29tcG9zaXRpb24sXHJcbn0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG5cdG5hbWVQYXR0ZXJuOiBzdHJpbmdcclxuXHRleHRQYXR0ZXJuOiBzdHJpbmdcclxuXHRuYW1lUmVwbGFjZTogc3RyaW5nXHJcblx0cmVuYW1lVGFza3M6IFJlbmFtZVRhc2tbXVxyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVuYW1lVGFzayB7XHJcblx0ZmlsZTogVEZpbGVcclxuXHRuYW1lOiBzdHJpbmdcclxufVxyXG5cclxudHlwZSByZW5hbWVGdW5jVHlwZSA9IChmaWxlOiBURmlsZSwgbmFtZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VCYXRjaFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGFjdGl2ZUZpbGU6IFRGaWxlXHJcblx0cmVuYW1lRnVuYzogcmVuYW1lRnVuY1R5cGVcclxuXHRvbkNsb3NlRXh0cmE6ICgpID0+IHZvaWRcclxuXHRzdGF0ZTogU3RhdGVcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGFjdGl2ZUZpbGU6IFRGaWxlLCByZW5hbWVGdW5jOiByZW5hbWVGdW5jVHlwZSwgb25DbG9zZTogKCkgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuYWN0aXZlRmlsZSA9IGFjdGl2ZUZpbGVcclxuXHRcdHRoaXMucmVuYW1lRnVuYyA9IHJlbmFtZUZ1bmNcclxuXHRcdHRoaXMub25DbG9zZUV4dHJhID0gb25DbG9zZVxyXG5cclxuXHRcdHRoaXMuc3RhdGUgPSB7XHJcblx0XHRcdG5hbWVQYXR0ZXJuOiAnJyxcclxuXHRcdFx0ZXh0UGF0dGVybjogJycsXHJcblx0XHRcdG5hbWVSZXBsYWNlOiAnJyxcclxuXHRcdFx0cmVuYW1lVGFza3M6IFtdLFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtcmVuYW1lLW1vZGFsJylcclxuXHRcdGNvbnN0IHsgY29udGVudEVsLCB0aXRsZUVsIH0gPSB0aGlzO1xyXG5cdFx0dGl0bGVFbC5zZXRUZXh0KCdCYXRjaCByZW5hbWUgZW1iZWRlZCBmaWxlcycpXHJcblxyXG5cdFx0Y29uc3QgbmFtZVBhdHRlcm5TZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTmFtZSBwYXR0ZXJuJylcclxuXHRcdFx0LnNldERlc2MoJ1BsZWFzZSBpbnB1dCB0aGUgbmFtZSBwYXR0ZXJuIHRvIG1hdGNoIGZpbGVzIChyZWdleCknKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zdGF0ZS5uYW1lUGF0dGVybilcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0YXRlLm5hbWVQYXR0ZXJuID0gdmFsdWVcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0KSlcclxuXHRcdGNvbnN0IG5wSW5wdXRFbCA9IG5hbWVQYXR0ZXJuU2V0dGluZy5jb250cm9sRWwuY2hpbGRyZW5bMF0gYXMgSFRNTElucHV0RWxlbWVudFxyXG5cdFx0bnBJbnB1dEVsLmZvY3VzKClcclxuXHRcdGNvbnN0IG5wSW5wdXRTdGF0ZSA9IGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uKG5wSW5wdXRFbClcclxuXHRcdG5wSW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMgKGUpID0+IHtcclxuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInICYmICFucElucHV0U3RhdGUubG9jaykge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRcdGlmICghdGhpcy5zdGF0ZS5uYW1lUGF0dGVybikge1xyXG5cdFx0XHRcdFx0ZXJyb3JFbC5pbm5lclRleHQgPSAnRXJyb3I6IFwiTmFtZSBwYXR0ZXJuXCIgY291bGQgbm90IGJlIGVtcHR5J1xyXG5cdFx0XHRcdFx0ZXJyb3JFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG5cdFx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMubWF0Y2hJbWFnZU5hbWVzKHRib2R5RWwpXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0Y29uc3QgZXh0UGF0dGVyblNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdFeHRlbnNpb24gcGF0dGVybicpXHJcblx0XHRcdC5zZXREZXNjKCdQbGVhc2UgaW5wdXQgdGhlIGV4dGVuc2lvbiBwYXR0ZXJuIHRvIG1hdGNoIGZpbGVzIChyZWdleCknKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zdGF0ZS5leHRQYXR0ZXJuKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RhdGUuZXh0UGF0dGVybiA9IHZhbHVlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCkpXHJcblx0XHRjb25zdCBleHRJbnB1dEVsID0gZXh0UGF0dGVyblNldHRpbmcuY29udHJvbEVsLmNoaWxkcmVuWzBdIGFzIEhUTUxJbnB1dEVsZW1lbnRcclxuXHRcdGV4dElucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRcdHRoaXMubWF0Y2hJbWFnZU5hbWVzKHRib2R5RWwpXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0Y29uc3QgbmFtZVJlcGxhY2VTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTmFtZSByZXBsYWNlJylcclxuXHRcdFx0LnNldERlc2MoJ1BsZWFzZSBpbnB1dCB0aGUgc3RyaW5nIHRvIHJlcGxhY2UgdGhlIG1hdGNoZWQgbmFtZSAodXNlICQxLCAkMiBmb3IgcmVnZXggZ3JvdXBzKScpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnN0YXRlLm5hbWVSZXBsYWNlKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RhdGUubmFtZVJlcGxhY2UgPSB2YWx1ZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQpKVxyXG5cclxuXHRcdGNvbnN0IG5ySW5wdXRFbCA9IG5hbWVSZXBsYWNlU2V0dGluZy5jb250cm9sRWwuY2hpbGRyZW5bMF0gYXMgSFRNTElucHV0RWxlbWVudFxyXG5cdFx0Y29uc3QgbnJJbnB1dFN0YXRlID0gbG9ja0lucHV0TWV0aG9kQ29tcG9zaXRpb24obnJJbnB1dEVsKVxyXG5cdFx0bnJJbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xyXG5cdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIW5ySW5wdXRTdGF0ZS5sb2NrKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRcdFx0dGhpcy5tYXRjaEltYWdlTmFtZXModGJvZHlFbClcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHJcblxyXG5cdFx0Y29uc3QgbWF0Y2hlZENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoe1xyXG5cdFx0XHRjbHM6ICdtYXRjaGVkLWNvbnRhaW5lcicsXHJcblx0XHR9KVxyXG5cdFx0Y29uc3QgdGFibGVFVCA9IGNyZWF0ZUVsZW1lbnRUcmVlKG1hdGNoZWRDb250YWluZXIsIHtcclxuXHRcdFx0dGFnOiAndGFibGUnLFxyXG5cdFx0XHRjaGlsZHJlbjogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRhZzogJ3RoZWFkJyxcclxuXHRcdFx0XHRcdGNoaWxkcmVuOiBbXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR0YWc6ICd0cicsXHJcblx0XHRcdFx0XHRcdFx0Y2hpbGRyZW46IFtcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGFnOiAndGQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiAnT3JpZ2luYWwgcGF0aCcsXHJcblx0XHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0YWc6ICd0ZCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6ICdSZW5hbWVkIE5hbWUnLFxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdF1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGFnOiAndGJvZHknLFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fSlcclxuXHRcdGNvbnN0IHRib2R5RWwgPSB0YWJsZUVULmNoaWxkcmVuWzFdLmVsXHJcblxyXG5cdFx0Y29uc3QgZXJyb3JFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoe1xyXG5cdFx0XHRjbHM6ICdlcnJvcicsXHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7JyxcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcclxuXHRcdFx0XHRidXR0b25cclxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdSZW5hbWUgYWxsJylcclxuXHRcdFx0XHRcdC5zZXRDbGFzcygnbW9kLWN0YScpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5ldyBDb25maXJtTW9kYWwoXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHRcdFx0J0NvbmZpcm0gcmVuYW1lIGFsbCcsXHJcblx0XHRcdFx0XHRcdFx0YEFyZSB5b3Ugc3VyZT8gVGhpcyB3aWxsIHJlbmFtZSBhbGwgdGhlICR7dGhpcy5zdGF0ZS5yZW5hbWVUYXNrcy5sZW5ndGh9IGltYWdlcyBtYXRjaGVkIHRoZSBwYXR0ZXJuLmAsXHJcblx0XHRcdFx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5hbWVBbGwoKVxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQpLm9wZW4oKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdGJ1dHRvblxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7IHRoaXMuY2xvc2UoKSB9KVxyXG5cdFx0XHR9KVxyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHR0aGlzLm9uQ2xvc2VFeHRyYSgpXHJcblx0fVxyXG5cclxuXHRhc3luYyByZW5hbWVBbGwoKSB7XHJcblx0XHRkZWJ1Z0xvZygncmVuYW1lQWxsJywgdGhpcy5zdGF0ZSlcclxuXHRcdGZvciAoY29uc3QgdGFzayBvZiB0aGlzLnN0YXRlLnJlbmFtZVRhc2tzKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMucmVuYW1lRnVuYyh0YXNrLmZpbGUsIHRhc2submFtZSlcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG1hdGNoSW1hZ2VOYW1lcyh0Ym9keUVsOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgeyBzdGF0ZSB9ID0gdGhpc1xyXG5cdFx0Y29uc3QgcmVuYW1lVGFza3M6IFJlbmFtZVRhc2tbXSA9IFtdXHJcblx0XHR0Ym9keUVsLmVtcHR5KClcclxuXHRcdGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuYWN0aXZlRmlsZSlcclxuXHRcdGlmICghZmlsZUNhY2hlIHx8ICFmaWxlQ2FjaGUuZW1iZWRzKSByZXR1cm5cclxuXHJcblx0XHRjb25zdCBuYW1lUGF0dGVyblJlZ2V4ID0gbmV3IFJlZ0V4cChzdGF0ZS5uYW1lUGF0dGVybiwgJ2cnKVxyXG5cdFx0Y29uc3QgZXh0UGF0dGVyblJlZ2V4ID0gbmV3IFJlZ0V4cChzdGF0ZS5leHRQYXR0ZXJuKVxyXG5cdFx0ZmlsZUNhY2hlLmVtYmVkcy5mb3JFYWNoKGVtYmVkID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZW1iZWQubGluaywgdGhpcy5hY3RpdmVGaWxlLnBhdGgpXHJcblx0XHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignZmlsZSBub3QgZm91bmQnLCBlbWJlZC5saW5rKVxyXG5cdFx0XHRcdHJldHVyblxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIG1hdGNoIGV4dCAob25seSBpZiBleHRQYXR0ZXJuIGlzIG5vdCBlbXB0eSlcclxuXHRcdFx0aWYgKHN0YXRlLmV4dFBhdHRlcm4pIHtcclxuXHRcdFx0XHRjb25zdCBtMCA9IGV4dFBhdHRlcm5SZWdleC5leGVjKGZpbGUuZXh0ZW5zaW9uKVxyXG5cdFx0XHRcdGlmICghbTApIHJldHVyblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBtYXRjaCBzdGVtXHJcblx0XHRcdGNvbnN0IHN0ZW0gPSBmaWxlLmJhc2VuYW1lXHJcblx0XHRcdG5hbWVQYXR0ZXJuUmVnZXgubGFzdEluZGV4ID0gMFxyXG5cdFx0XHRjb25zdCBtMSA9IG5hbWVQYXR0ZXJuUmVnZXguZXhlYyhzdGVtKVxyXG5cdFx0XHRpZiAoIW0xKSByZXR1cm5cclxuXHJcblx0XHRcdGxldCByZW5hbWVkTmFtZSA9IGZpbGUubmFtZVxyXG5cdFx0XHRpZiAoc3RhdGUubmFtZVJlcGxhY2UpIHtcclxuXHRcdFx0XHRuYW1lUGF0dGVyblJlZ2V4Lmxhc3RJbmRleCA9IDBcclxuXHRcdFx0XHRyZW5hbWVkTmFtZSA9IHN0ZW0ucmVwbGFjZShuYW1lUGF0dGVyblJlZ2V4LCBzdGF0ZS5uYW1lUmVwbGFjZSlcclxuXHRcdFx0XHRyZW5hbWVkTmFtZSA9IGAke3JlbmFtZWROYW1lfS4ke2ZpbGUuZXh0ZW5zaW9ufWBcclxuXHRcdFx0fVxyXG5cdFx0XHRyZW5hbWVUYXNrcy5wdXNoKHtcclxuXHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdG5hbWU6IHJlbmFtZWROYW1lLFxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0Y3JlYXRlRWxlbWVudFRyZWUodGJvZHlFbCwge1xyXG5cdFx0XHRcdHRhZzogJ3RyJyxcclxuXHRcdFx0XHRjaGlsZHJlbjogW1xyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0YWc6ICd0ZCcsXHJcblx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dGFnOiAnc3BhbicsXHJcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiBmaWxlLm5hbWUsXHJcblx0XHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR0YWc6ICdkaXYnLFxyXG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogZmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjoge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzczogJ2ZpbGUtcGF0aCcsXHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRdXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0YWc6ICd0ZCcsXHJcblx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dGFnOiAnc3BhbicsXHJcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiByZW5hbWVkTmFtZSxcclxuXHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHRhZzogJ2RpdicsXHJcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiBwYXRoLmpvaW4oZmlsZS5wYXJlbnQucGF0aCwgcmVuYW1lZE5hbWUpLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjoge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzczogJ2ZpbGUtcGF0aCcsXHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRdXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XVxyXG5cclxuXHRcdFx0fSlcclxuXHRcdH0pXHJcblxyXG5cdFx0ZGVidWdMb2coJ25ldyByZW5hbWVUYXNrcycsIHJlbmFtZVRhc2tzKVxyXG5cdFx0c3RhdGUucmVuYW1lVGFza3MgPSByZW5hbWVUYXNrc1xyXG5cdH1cclxufVxyXG5cclxuXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHR0aXRsZTogc3RyaW5nXHJcblx0bWVzc2FnZTogc3RyaW5nXHJcblx0b25Db25maXJtOiAoKSA9PiB2b2lkXHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZVxyXG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZVxyXG5cdFx0dGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm1cclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsLCB0aXRsZUVsIH0gPSB0aGlzO1xyXG5cdFx0dGl0bGVFbC5zZXRUZXh0KHRoaXMudGl0bGUpXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XHJcblx0XHRcdHRleHQ6IHRoaXMubWVzc2FnZSxcclxuXHRcdH0pXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XHJcblx0XHRcdFx0YnV0dG9uXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnWWVzJylcclxuXHRcdFx0XHRcdC5zZXRDbGFzcygnbW9kLXdhcm5pbmcnKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLm9uQ29uZmlybSgpXHJcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdGJ1dHRvblxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ05vJylcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHsgdGhpcy5jbG9zZSgpIH0pXHJcblx0XHRcdH0pXHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge1xyXG4gIEFwcCxcclxuICBWYXVsdCxcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY29uc3QgREVCVUcgPSAhKHByb2Nlc3MuZW52LkJVSUxEX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKVxyXG5pZiAoREVCVUcpIGNvbnNvbGUubG9nKCdERUJVRyBpcyBlbmFibGVkJylcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z0xvZyguLi5hcmdzOiBhbnlbXSkge1xyXG5cdGlmIChERUJVRykge1xyXG5cdFx0Y29uc29sZS5sb2coKG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDIzKSwgLi4uYXJncylcclxuXHR9XHJcbn1cclxuXHJcbmludGVyZmFjZSBFbGVtZW50VHJlZU9wdGlvbnMgZXh0ZW5kcyBEb21FbGVtZW50SW5mbyB7XHJcblx0dGFnOiBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXBcclxuXHRjaGlsZHJlbj86IEVsZW1lbnRUcmVlT3B0aW9uc1tdXHJcbn1cclxuXHJcbmludGVyZmFjZSBFbGVtZW50VHJlZSB7XHJcblx0ZWw6IEhUTUxFbGVtZW50XHJcblx0Y2hpbGRyZW46IEVsZW1lbnRUcmVlW11cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUcmVlKHJvb3RFbDogSFRNTEVsZW1lbnQsIG9wdHM6IEVsZW1lbnRUcmVlT3B0aW9ucyk6IEVsZW1lbnRUcmVlIHtcclxuXHRjb25zdCByZXN1bHQ6IEVsZW1lbnRUcmVlID0ge1xyXG5cdFx0ZWw6IHJvb3RFbC5jcmVhdGVFbChvcHRzLnRhZywgb3B0cyBhcyBEb21FbGVtZW50SW5mbyksXHJcblx0XHRjaGlsZHJlbjogW10sXHJcblx0fVxyXG5cdGNvbnN0IGNoaWxkcmVuID0gb3B0cy5jaGlsZHJlbiB8fCBbXVxyXG5cdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuXHRcdHJlc3VsdC5jaGlsZHJlbi5wdXNoKGNyZWF0ZUVsZW1lbnRUcmVlKHJlc3VsdC5lbCwgY2hpbGQpKVxyXG5cdH1cclxuXHRyZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwYXRoID0ge1xyXG5cdC8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xyXG5cdGpvaW4oLi4ucGFydFNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcblx0XHQvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXHJcblx0XHRsZXQgcGFydHM6IHN0cmluZ1tdID0gW11cclxuXHRcdGZvciAobGV0IGkgPSAwLCBsID0gcGFydFNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdFx0XHRwYXJ0cyA9IHBhcnRzLmNvbmNhdChwYXJ0U2VnbWVudHNbaV0uc3BsaXQoJy8nKSlcclxuXHRcdH1cclxuXHRcdC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxyXG5cdFx0Y29uc3QgbmV3UGFydHMgPSBbXVxyXG5cdFx0Zm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgcGFydCA9IHBhcnRzW2ldXHJcblx0XHRcdC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzXHJcblx0XHRcdC8vIEFsc28gcmVtb3ZlIFwiLlwiIHNlZ21lbnRzXHJcblx0XHRcdGlmICghcGFydCB8fCBwYXJ0ID09PSAnLicpIGNvbnRpbnVlXHJcblx0XHRcdC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXHJcblx0XHRcdGVsc2UgbmV3UGFydHMucHVzaChwYXJ0KVxyXG5cdFx0fVxyXG5cdFx0Ly8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cclxuXHRcdGlmIChwYXJ0c1swXSA9PT0gJycpIG5ld1BhcnRzLnVuc2hpZnQoJycpXHJcblx0XHQvLyBUdXJuIGJhY2sgaW50byBhIHNpbmdsZSBzdHJpbmcgcGF0aC5cclxuXHRcdHJldHVybiBuZXdQYXJ0cy5qb2luKCcvJylcclxuXHR9LFxyXG5cclxuXHQvLyByZXR1cm5zIHRoZSBsYXN0IHBhcnQgb2YgYSBwYXRoLCBlLmcuICdmb28uanBnJ1xyXG5cdGJhc2VuYW1lKGZ1bGxwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3Qgc3AgPSBmdWxscGF0aC5zcGxpdCgnLycpXHJcblx0XHRyZXR1cm4gc3Bbc3AubGVuZ3RoIC0gMV1cclxuXHR9LFxyXG5cclxuXHQvLyByZXR1cm4gZXh0ZW5zaW9uIHdpdGhvdXQgZG90LCBlLmcuICdqcGcnXHJcblx0ZXh0ZW5zaW9uKGZ1bGxwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgcG9zaXRpb25zID0gWy4uLmZ1bGxwYXRoLm1hdGNoQWxsKG5ldyBSZWdFeHAoJ1xcXFwuJywgJ2dpJykpXS5tYXAoYSA9PiBhLmluZGV4KVxyXG5cdFx0cmV0dXJuIGZ1bGxwYXRoLnNsaWNlKHBvc2l0aW9uc1twb3NpdGlvbnMubGVuZ3RoIC0gMV0gKyAxKVxyXG5cdH0sXHJcbn1cclxuXHJcbmNvbnN0IGZpbGVuYW1lTm90QWxsb3dlZENoYXJzID0gL1teXFxwe0x9MC05fmAhQCQmKigpXFwtXz0re307J1wiLDwuPj8gXS91Z1xyXG5cclxuZXhwb3J0IGNvbnN0IHNhbml0aXplciA9IHtcclxuXHRmaWxlbmFtZShzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHMucmVwbGFjZShmaWxlbmFtZU5vdEFsbG93ZWRDaGFycywgJycpLnRyaW0oKVxyXG5cdH0sXHJcblxyXG5cdGRlbGltaXRlcihzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cyA9IHRoaXMuZmlsZW5hbWUocylcclxuXHRcdC8vIHVzZSBkZWZhdWx0ICctJyBpZiBubyB2YWxpZCBjaGFycyBmb3VuZFxyXG5cdFx0aWYgKCFzKSBzID0gJy0nXHJcblx0XHRyZXR1cm4gc1xyXG5cdH1cclxufVxyXG5cclxuLy8gcmVmOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjk2OTQ4Ni81OTYyMDZcclxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XHJcbn1cclxuXHJcblxyXG5pbnRlcmZhY2UgQ29tcG9zaXRpb25TdGF0ZSB7XHJcblx0bG9jazogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9ja0lucHV0TWV0aG9kQ29tcG9zaXRpb24oZWw6IEhUTUxJbnB1dEVsZW1lbnQpOiBDb21wb3NpdGlvblN0YXRlIHtcclxuXHRjb25zdCBzdGF0ZTogQ29tcG9zaXRpb25TdGF0ZSA9IHtcclxuXHRcdGxvY2s6IGZhbHNlLFxyXG5cdH1cclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0JywgKCkgPT4ge1xyXG5cdFx0c3RhdGUubG9jayA9IHRydWVcclxuXHR9KVxyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uZW5kJywgKCkgPT4ge1xyXG5cdFx0c3RhdGUubG9jayA9IGZhbHNlXHJcblx0fSlcclxuXHRyZXR1cm4gc3RhdGVcclxufVxyXG5cclxuXHJcbmludGVyZmFjZSBWYXVsdENvbmZpZyB7XHJcblx0dXNlTWFya2Rvd25MaW5rcz86IGJvb2xlYW5cclxufVxyXG5cclxuaW50ZXJmYWNlIFZhdWx0V2l0aENvbmZpZyBleHRlbmRzIFZhdWx0IHtcclxuXHRjb25maWc/OiBWYXVsdENvbmZpZyxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhdWx0Q29uZmlnKGFwcDogQXBwKTogVmF1bHRDb25maWd8bnVsbCB7XHJcblx0Y29uc3QgdmF1bHQgPSBhcHAudmF1bHQgYXMgVmF1bHRXaXRoQ29uZmlnXHJcblx0cmV0dXJuIHZhdWx0LmNvbmZpZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5hbWVPYmoge1xyXG5cdG5hbWU6IHN0cmluZ1xyXG5cdHN0ZW06IHN0cmluZ1xyXG5cdGV4dGVuc2lvbjogc3RyaW5nXHJcbn1cclxuIiwgImltcG9ydCB7IEZyb250TWF0dGVyQ2FjaGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5jb25zdCBkYXRlVG1wbFJlZ2V4ID0gL3t7REFURTooW159XSspfX0vZ21cclxuY29uc3QgZnJvbnRtYXR0ZXJUbXBsUmVnZXggPSAve3tmcm9udG1hdHRlcjooW159XSspfX0vZ21cclxuXHJcbmNvbnN0IHJlcGxhY2VEYXRlVmFyID0gKHM6IHN0cmluZywgZGF0ZTogbW9tZW50Lk1vbWVudCk6IHN0cmluZyA9PiB7XHJcblx0Y29uc3QgbSA9IGRhdGVUbXBsUmVnZXguZXhlYyhzKVxyXG5cdGlmICghbSkgcmV0dXJuIHNcclxuXHRyZXR1cm4gcy5yZXBsYWNlKG1bMF0sIGRhdGUuZm9ybWF0KG1bMV0pKVxyXG59XHJcblxyXG5jb25zdCByZXBsYWNlRnJvbnRtYXR0ZXJWYXIgPSAoczogc3RyaW5nLCBmcm9udG1hdHRlcj86IEZyb250TWF0dGVyQ2FjaGUpOiBzdHJpbmcgPT4ge1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHJldHVybiBzXHJcblx0Y29uc3QgbSA9IGZyb250bWF0dGVyVG1wbFJlZ2V4LmV4ZWMocylcclxuXHRpZiAoIW0pIHJldHVybiBzXHJcblx0cmV0dXJuIHMucmVwbGFjZShtWzBdLCBmcm9udG1hdHRlclttWzFdXSB8fCAnJylcclxufVxyXG5cclxuaW50ZXJmYWNlIFRlbXBsYXRlRGF0YSB7XHJcblx0aW1hZ2VOYW1lS2V5OiBzdHJpbmdcclxuXHRmaWxlTmFtZTogc3RyaW5nXHJcblx0ZGlyTmFtZTogc3RyaW5nXHJcblx0Zmlyc3RIZWFkaW5nOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJlbmRlclRlbXBsYXRlID0gKHRtcGw6IHN0cmluZywgZGF0YTogVGVtcGxhdGVEYXRhLCBmcm9udG1hdHRlcj86IEZyb250TWF0dGVyQ2FjaGUpID0+IHtcclxuXHRjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KClcclxuXHRsZXQgdGV4dCA9IHRtcGxcclxuXHRsZXQgbmV3dGV4dFxyXG5cdHdoaWxlICgobmV3dGV4dCA9IHJlcGxhY2VEYXRlVmFyKHRleHQsIG5vdykpICE9IHRleHQpIHtcclxuXHRcdHRleHQgPSBuZXd0ZXh0XHJcblx0fVxyXG5cdHdoaWxlICgobmV3dGV4dCA9IHJlcGxhY2VGcm9udG1hdHRlclZhcih0ZXh0LCBmcm9udG1hdHRlcikpICE9IHRleHQpIHtcclxuXHRcdHRleHQgPSBuZXd0ZXh0XHJcblx0fVxyXG5cclxuXHR0ZXh0ID0gdGV4dFxyXG5cdFx0LnJlcGxhY2UoL3t7aW1hZ2VOYW1lS2V5fX0vZ20sIGRhdGEuaW1hZ2VOYW1lS2V5KVxyXG5cdFx0LnJlcGxhY2UoL3t7ZmlsZU5hbWV9fS9nbSwgZGF0YS5maWxlTmFtZSlcclxuXHRcdC5yZXBsYWNlKC97e2Rpck5hbWV9fS9nbSwgZGF0YS5kaXJOYW1lKVxyXG5cdFx0LnJlcGxhY2UoL3t7Zmlyc3RIZWFkaW5nfX0vZ20sIGRhdGEuZmlyc3RIZWFkaW5nKVxyXG5cdHJldHVybiB0ZXh0XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQSwwQkFBQUEsU0FBQTtBQUFBLElBQUFBLFFBQUE7QUFBQSxNQUNJLE1BQVE7QUFBQSxNQUNSLFNBQVc7QUFBQSxNQUNYLE1BQVE7QUFBQSxNQUNSLFNBQVc7QUFBQSxRQUNQLEtBQU87QUFBQSxRQUNQLE9BQVM7QUFBQSxRQUNULFNBQVc7QUFBQSxRQUNYLFNBQVc7QUFBQSxNQUNmO0FBQUEsTUFDQSxVQUFZLENBQUM7QUFBQSxNQUNiLFFBQVU7QUFBQSxNQUNWLFNBQVc7QUFBQSxNQUNYLGlCQUFtQjtBQUFBLFFBQ2YsZUFBZTtBQUFBLFFBQ2Ysb0NBQW9DO0FBQUEsUUFDcEMsNkJBQTZCO0FBQUEsUUFDN0IsbUJBQW1CO0FBQUEsUUFDbkIsU0FBVztBQUFBLFFBQ1gsVUFBWTtBQUFBLFFBQ1osT0FBUztBQUFBLFFBQ1QsWUFBYztBQUFBLE1BQ2xCO0FBQUEsTUFDQSxjQUFnQjtBQUFBLFFBQ1osWUFBWTtBQUFBLE1BQ2hCO0FBQUEsSUFDSjtBQUFBO0FBQUE7OztBQzFCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0EsSUFBQUMsbUJBV087OztBQ3RCUCxzQkFBMkM7OztBQ0twQyxJQUFNLFFBQVE7QUFDckIsSUFBSTtBQUFPLFVBQVEsSUFBSSxrQkFBa0I7QUFFbEMsU0FBUyxZQUFZLE1BQWE7QUFDeEMsTUFBSSxPQUFPO0FBQ1YsWUFBUSxJQUFLLElBQUksS0FBSyxFQUFHLFlBQVksRUFBRSxNQUFNLElBQUksRUFBRSxHQUFHLEdBQUcsSUFBSTtBQUFBLEVBQzlEO0FBQ0Q7QUFZTyxTQUFTLGtCQUFrQixRQUFxQixNQUF1QztBQUM3RixRQUFNLFNBQXNCO0FBQUEsSUFDM0IsSUFBSSxPQUFPLFNBQVMsS0FBSyxLQUFLLElBQXNCO0FBQUEsSUFDcEQsVUFBVSxDQUFDO0FBQUEsRUFDWjtBQUNBLFFBQU0sV0FBVyxLQUFLLFlBQVksQ0FBQztBQUNuQyxhQUFXLFNBQVMsVUFBVTtBQUM3QixXQUFPLFNBQVMsS0FBSyxrQkFBa0IsT0FBTyxJQUFJLEtBQUssQ0FBQztBQUFBLEVBQ3pEO0FBQ0EsU0FBTztBQUNSO0FBRU8sSUFBTSxPQUFPO0FBQUE7QUFBQSxFQUVuQixRQUFRLGNBQWdDO0FBRXZDLFFBQUksUUFBa0IsQ0FBQztBQUN2QixhQUFTLElBQUksR0FBRyxJQUFJLGFBQWEsUUFBUSxJQUFJLEdBQUcsS0FBSztBQUNwRCxjQUFRLE1BQU0sT0FBTyxhQUFhLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQztBQUFBLElBQ2hEO0FBRUEsVUFBTSxXQUFXLENBQUM7QUFDbEIsYUFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLFFBQVEsSUFBSSxHQUFHLEtBQUs7QUFDN0MsWUFBTSxPQUFPLE1BQU0sQ0FBQztBQUdwQixVQUFJLENBQUMsUUFBUSxTQUFTO0FBQUs7QUFBQTtBQUV0QixpQkFBUyxLQUFLLElBQUk7QUFBQSxJQUN4QjtBQUVBLFFBQUksTUFBTSxDQUFDLE1BQU07QUFBSSxlQUFTLFFBQVEsRUFBRTtBQUV4QyxXQUFPLFNBQVMsS0FBSyxHQUFHO0FBQUEsRUFDekI7QUFBQTtBQUFBLEVBR0EsU0FBUyxVQUEwQjtBQUNsQyxVQUFNLEtBQUssU0FBUyxNQUFNLEdBQUc7QUFDN0IsV0FBTyxHQUFHLEdBQUcsU0FBUyxDQUFDO0FBQUEsRUFDeEI7QUFBQTtBQUFBLEVBR0EsVUFBVSxVQUEwQjtBQUNuQyxVQUFNLFlBQVksQ0FBQyxHQUFHLFNBQVMsU0FBUyxJQUFJLE9BQU8sT0FBTyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksT0FBSyxFQUFFLEtBQUs7QUFDbEYsV0FBTyxTQUFTLE1BQU0sVUFBVSxVQUFVLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFBQSxFQUMxRDtBQUNEO0FBRUEsSUFBTSwwQkFBMEI7QUFFekIsSUFBTSxZQUFZO0FBQUEsRUFDeEIsU0FBUyxHQUFtQjtBQUMzQixXQUFPLEVBQUUsUUFBUSx5QkFBeUIsRUFBRSxFQUFFLEtBQUs7QUFBQSxFQUNwRDtBQUFBLEVBRUEsVUFBVSxHQUFtQjtBQUM1QixRQUFJLEtBQUssU0FBUyxDQUFDO0FBRW5CLFFBQUksQ0FBQztBQUFHLFVBQUk7QUFDWixXQUFPO0FBQUEsRUFDUjtBQUNEO0FBR08sU0FBUyxhQUFhLEdBQVc7QUFDcEMsU0FBTyxFQUFFLFFBQVEsdUJBQXVCLE1BQU07QUFDbEQ7QUFPTyxTQUFTLDJCQUEyQixJQUF3QztBQUNsRixRQUFNLFFBQTBCO0FBQUEsSUFDL0IsTUFBTTtBQUFBLEVBQ1A7QUFDQSxLQUFHLGlCQUFpQixvQkFBb0IsTUFBTTtBQUM3QyxVQUFNLE9BQU87QUFBQSxFQUNkLENBQUM7QUFDRCxLQUFHLGlCQUFpQixrQkFBa0IsTUFBTTtBQUMzQyxVQUFNLE9BQU87QUFBQSxFQUNkLENBQUM7QUFDRCxTQUFPO0FBQ1I7OztBRHpGTyxJQUFNLHdCQUFOLGNBQW9DLHNCQUFNO0FBQUEsRUFNaEQsWUFBWSxLQUFVLFlBQW1CLFlBQTRCLFNBQXFCO0FBQ3pGLFVBQU0sR0FBRztBQUNULFNBQUssYUFBYTtBQUNsQixTQUFLLGFBQWE7QUFDbEIsU0FBSyxlQUFlO0FBRXBCLFNBQUssUUFBUTtBQUFBLE1BQ1osYUFBYTtBQUFBLE1BQ2IsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLE1BQ2IsYUFBYSxDQUFDO0FBQUEsSUFDZjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLFNBQVM7QUFDUixTQUFLLFlBQVksU0FBUyxvQkFBb0I7QUFDOUMsVUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJO0FBQy9CLFlBQVEsUUFBUSw0QkFBNEI7QUFFNUMsVUFBTSxxQkFBcUIsSUFBSSx3QkFBUSxTQUFTLEVBQzlDLFFBQVEsY0FBYyxFQUN0QixRQUFRLHNEQUFzRCxFQUM5RCxRQUFRLFVBQVEsS0FDZixTQUFTLEtBQUssTUFBTSxXQUFXLEVBQy9CO0FBQUEsTUFBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxNQUFNLGNBQWM7QUFBQSxNQUMxQjtBQUFBLElBQ0EsQ0FBQztBQUNILFVBQU0sWUFBWSxtQkFBbUIsVUFBVSxTQUFTLENBQUM7QUFDekQsY0FBVSxNQUFNO0FBQ2hCLFVBQU0sZUFBZSwyQkFBMkIsU0FBUztBQUN6RCxjQUFVLGlCQUFpQixXQUFXLENBQU8sTUFBTTtBQUNsRCxVQUFJLEVBQUUsUUFBUSxXQUFXLENBQUMsYUFBYSxNQUFNO0FBQzVDLFVBQUUsZUFBZTtBQUNqQixZQUFJLENBQUMsS0FBSyxNQUFNLGFBQWE7QUFDNUIsa0JBQVEsWUFBWTtBQUNwQixrQkFBUSxNQUFNLFVBQVU7QUFDeEI7QUFBQSxRQUNEO0FBQ0EsYUFBSyxnQkFBZ0IsT0FBTztBQUFBLE1BQzdCO0FBQUEsSUFDRCxFQUFDO0FBRUQsVUFBTSxvQkFBb0IsSUFBSSx3QkFBUSxTQUFTLEVBQzdDLFFBQVEsbUJBQW1CLEVBQzNCLFFBQVEsMkRBQTJELEVBQ25FLFFBQVEsVUFBUSxLQUNmLFNBQVMsS0FBSyxNQUFNLFVBQVUsRUFDOUI7QUFBQSxNQUFTLENBQU8sVUFBVTtBQUMxQixhQUFLLE1BQU0sYUFBYTtBQUFBLE1BQ3pCO0FBQUEsSUFDQSxDQUFDO0FBQ0gsVUFBTSxhQUFhLGtCQUFrQixVQUFVLFNBQVMsQ0FBQztBQUN6RCxlQUFXLGlCQUFpQixXQUFXLENBQU8sTUFBTTtBQUNuRCxVQUFJLEVBQUUsUUFBUSxTQUFTO0FBQ3RCLFVBQUUsZUFBZTtBQUNqQixhQUFLLGdCQUFnQixPQUFPO0FBQUEsTUFDN0I7QUFBQSxJQUNELEVBQUM7QUFFRCxVQUFNLHFCQUFxQixJQUFJLHdCQUFRLFNBQVMsRUFDOUMsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsbUZBQW1GLEVBQzNGLFFBQVEsVUFBUSxLQUNmLFNBQVMsS0FBSyxNQUFNLFdBQVcsRUFDL0I7QUFBQSxNQUFTLENBQU8sVUFBVTtBQUMxQixhQUFLLE1BQU0sY0FBYztBQUFBLE1BQzFCO0FBQUEsSUFDQSxDQUFDO0FBRUgsVUFBTSxZQUFZLG1CQUFtQixVQUFVLFNBQVMsQ0FBQztBQUN6RCxVQUFNLGVBQWUsMkJBQTJCLFNBQVM7QUFDekQsY0FBVSxpQkFBaUIsV0FBVyxDQUFPLE1BQU07QUFDbEQsVUFBSSxFQUFFLFFBQVEsV0FBVyxDQUFDLGFBQWEsTUFBTTtBQUM1QyxVQUFFLGVBQWU7QUFDakIsYUFBSyxnQkFBZ0IsT0FBTztBQUFBLE1BQzdCO0FBQUEsSUFDRCxFQUFDO0FBR0QsVUFBTSxtQkFBbUIsVUFBVSxVQUFVO0FBQUEsTUFDNUMsS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELFVBQU0sVUFBVSxrQkFBa0Isa0JBQWtCO0FBQUEsTUFDbkQsS0FBSztBQUFBLE1BQ0wsVUFBVTtBQUFBLFFBQ1Q7QUFBQSxVQUNDLEtBQUs7QUFBQSxVQUNMLFVBQVU7QUFBQSxZQUNUO0FBQUEsY0FDQyxLQUFLO0FBQUEsY0FDTCxVQUFVO0FBQUEsZ0JBQ1Q7QUFBQSxrQkFDQyxLQUFLO0FBQUEsa0JBQ0wsTUFBTTtBQUFBLGdCQUNQO0FBQUEsZ0JBQ0E7QUFBQSxrQkFDQyxLQUFLO0FBQUEsa0JBQ0wsTUFBTTtBQUFBLGdCQUNQO0FBQUEsY0FDRDtBQUFBLFlBQ0Q7QUFBQSxVQUNEO0FBQUEsUUFDRDtBQUFBLFFBQ0E7QUFBQSxVQUNDLEtBQUs7QUFBQSxRQUNOO0FBQUEsTUFDRDtBQUFBLElBQ0QsQ0FBQztBQUNELFVBQU0sVUFBVSxRQUFRLFNBQVMsQ0FBQyxFQUFFO0FBRXBDLFVBQU0sVUFBVSxVQUFVLFVBQVU7QUFBQSxNQUNuQyxLQUFLO0FBQUEsTUFDTCxNQUFNO0FBQUEsUUFDTCxPQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0QsQ0FBQztBQUVELFFBQUksd0JBQVEsU0FBUyxFQUNuQixVQUFVLFlBQVU7QUFDcEIsYUFDRSxjQUFjLFlBQVksRUFDMUIsU0FBUyxTQUFTLEVBQ2xCLFFBQVEsTUFBTTtBQUNkLFlBQUk7QUFBQSxVQUNILEtBQUs7QUFBQSxVQUNMO0FBQUEsVUFDQSwwQ0FBMEMsS0FBSyxNQUFNLFlBQVk7QUFBQSxVQUNqRSxNQUFNO0FBQ0wsaUJBQUssVUFBVTtBQUNmLGlCQUFLLE1BQU07QUFBQSxVQUNaO0FBQUEsUUFDRCxFQUFFLEtBQUs7QUFBQSxNQUNSLENBQUM7QUFBQSxJQUNILENBQUMsRUFDQSxVQUFVLFlBQVU7QUFDcEIsYUFDRSxjQUFjLFFBQVEsRUFDdEIsUUFBUSxNQUFNO0FBQUUsYUFBSyxNQUFNO0FBQUEsTUFBRSxDQUFDO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLFVBQVU7QUFDVCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUNoQixTQUFLLGFBQWE7QUFBQSxFQUNuQjtBQUFBLEVBRU0sWUFBWTtBQUFBO0FBQ2pCLGVBQVMsYUFBYSxLQUFLLEtBQUs7QUFDaEMsaUJBQVcsUUFBUSxLQUFLLE1BQU0sYUFBYTtBQUMxQyxjQUFNLEtBQUssV0FBVyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQUEsTUFDM0M7QUFBQSxJQUNEO0FBQUE7QUFBQSxFQUVBLGdCQUFnQixTQUFzQjtBQUNyQyxVQUFNLEVBQUUsTUFBTSxJQUFJO0FBQ2xCLFVBQU0sY0FBNEIsQ0FBQztBQUNuQyxZQUFRLE1BQU07QUFDZCxVQUFNLFlBQVksS0FBSyxJQUFJLGNBQWMsYUFBYSxLQUFLLFVBQVU7QUFDckUsUUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVO0FBQVE7QUFFckMsVUFBTSxtQkFBbUIsSUFBSSxPQUFPLE1BQU0sYUFBYSxHQUFHO0FBQzFELFVBQU0sa0JBQWtCLElBQUksT0FBTyxNQUFNLFVBQVU7QUFDbkQsY0FBVSxPQUFPLFFBQVEsV0FBUztBQUNqQyxZQUFNLE9BQU8sS0FBSyxJQUFJLGNBQWMscUJBQXFCLE1BQU0sTUFBTSxLQUFLLFdBQVcsSUFBSTtBQUN6RixVQUFJLENBQUMsTUFBTTtBQUNWLGdCQUFRLEtBQUssa0JBQWtCLE1BQU0sSUFBSTtBQUN6QztBQUFBLE1BQ0Q7QUFFQSxVQUFJLE1BQU0sWUFBWTtBQUNyQixjQUFNLEtBQUssZ0JBQWdCLEtBQUssS0FBSyxTQUFTO0FBQzlDLFlBQUksQ0FBQztBQUFJO0FBQUEsTUFDVjtBQUdBLFlBQU0sT0FBTyxLQUFLO0FBQ2xCLHVCQUFpQixZQUFZO0FBQzdCLFlBQU0sS0FBSyxpQkFBaUIsS0FBSyxJQUFJO0FBQ3JDLFVBQUksQ0FBQztBQUFJO0FBRVQsVUFBSSxjQUFjLEtBQUs7QUFDdkIsVUFBSSxNQUFNLGFBQWE7QUFDdEIseUJBQWlCLFlBQVk7QUFDN0Isc0JBQWMsS0FBSyxRQUFRLGtCQUFrQixNQUFNLFdBQVc7QUFDOUQsc0JBQWMsR0FBRyxlQUFlLEtBQUs7QUFBQSxNQUN0QztBQUNBLGtCQUFZLEtBQUs7QUFBQSxRQUNoQjtBQUFBLFFBQ0EsTUFBTTtBQUFBLE1BQ1AsQ0FBQztBQUVELHdCQUFrQixTQUFTO0FBQUEsUUFDMUIsS0FBSztBQUFBLFFBQ0wsVUFBVTtBQUFBLFVBQ1Q7QUFBQSxZQUNDLEtBQUs7QUFBQSxZQUNMLFVBQVU7QUFBQSxjQUNUO0FBQUEsZ0JBQ0MsS0FBSztBQUFBLGdCQUNMLE1BQU0sS0FBSztBQUFBLGNBQ1o7QUFBQSxjQUNBO0FBQUEsZ0JBQ0MsS0FBSztBQUFBLGdCQUNMLE1BQU0sS0FBSztBQUFBLGdCQUNYLE1BQU07QUFBQSxrQkFDTCxPQUFPO0FBQUEsZ0JBQ1I7QUFBQSxjQUNEO0FBQUEsWUFDRDtBQUFBLFVBQ0Q7QUFBQSxVQUNBO0FBQUEsWUFDQyxLQUFLO0FBQUEsWUFDTCxVQUFVO0FBQUEsY0FDVDtBQUFBLGdCQUNDLEtBQUs7QUFBQSxnQkFDTCxNQUFNO0FBQUEsY0FDUDtBQUFBLGNBQ0E7QUFBQSxnQkFDQyxLQUFLO0FBQUEsZ0JBQ0wsTUFBTSxLQUFLLEtBQUssS0FBSyxPQUFPLE1BQU0sV0FBVztBQUFBLGdCQUM3QyxNQUFNO0FBQUEsa0JBQ0wsT0FBTztBQUFBLGdCQUNSO0FBQUEsY0FDRDtBQUFBLFlBQ0Q7QUFBQSxVQUNEO0FBQUEsUUFDRDtBQUFBLE1BRUQsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELGFBQVMsbUJBQW1CLFdBQVc7QUFDdkMsVUFBTSxjQUFjO0FBQUEsRUFDckI7QUFDRDtBQUdBLElBQU0sZUFBTixjQUEyQixzQkFBTTtBQUFBLEVBS2hDLFlBQVksS0FBVSxPQUFlLFNBQWlCLFdBQXVCO0FBQzVFLFVBQU0sR0FBRztBQUNULFNBQUssUUFBUTtBQUNiLFNBQUssVUFBVTtBQUNmLFNBQUssWUFBWTtBQUFBLEVBQ2xCO0FBQUEsRUFFQSxTQUFlO0FBQ2QsVUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJO0FBQy9CLFlBQVEsUUFBUSxLQUFLLEtBQUs7QUFDMUIsY0FBVSxTQUFTLEtBQUs7QUFBQSxNQUN2QixNQUFNLEtBQUs7QUFBQSxJQUNaLENBQUM7QUFFRCxRQUFJLHdCQUFRLFNBQVMsRUFDbkIsVUFBVSxZQUFVO0FBQ3BCLGFBQ0UsY0FBYyxLQUFLLEVBQ25CLFNBQVMsYUFBYSxFQUN0QixRQUFRLE1BQU07QUFDZCxhQUFLLFVBQVU7QUFDZixhQUFLLE1BQU07QUFBQSxNQUNaLENBQUM7QUFBQSxJQUNILENBQUMsRUFDQSxVQUFVLFlBQVU7QUFDcEIsYUFDRSxjQUFjLElBQUksRUFDbEIsUUFBUSxNQUFNO0FBQUUsYUFBSyxNQUFNO0FBQUEsTUFBRSxDQUFDO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFDRDs7O0FFMVNBLElBQU0sZ0JBQWdCO0FBQ3RCLElBQU0sdUJBQXVCO0FBRTdCLElBQU0saUJBQWlCLENBQUMsR0FBVyxTQUFnQztBQUNsRSxRQUFNLElBQUksY0FBYyxLQUFLLENBQUM7QUFDOUIsTUFBSSxDQUFDO0FBQUcsV0FBTztBQUNmLFNBQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEtBQUssT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3pDO0FBRUEsSUFBTSx3QkFBd0IsQ0FBQyxHQUFXLGdCQUEyQztBQUNwRixNQUFJLENBQUM7QUFBYSxXQUFPO0FBQ3pCLFFBQU0sSUFBSSxxQkFBcUIsS0FBSyxDQUFDO0FBQ3JDLE1BQUksQ0FBQztBQUFHLFdBQU87QUFDZixTQUFPLEVBQUUsUUFBUSxFQUFFLENBQUMsR0FBRyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRTtBQUMvQztBQVNPLElBQU0saUJBQWlCLENBQUMsTUFBYyxNQUFvQixnQkFBbUM7QUFDbkcsUUFBTSxNQUFNLE9BQU8sT0FBTztBQUMxQixNQUFJLE9BQU87QUFDWCxNQUFJO0FBQ0osVUFBUSxVQUFVLGVBQWUsTUFBTSxHQUFHLE1BQU0sTUFBTTtBQUNyRCxXQUFPO0FBQUEsRUFDUjtBQUNBLFVBQVEsVUFBVSxzQkFBc0IsTUFBTSxXQUFXLE1BQU0sTUFBTTtBQUNwRSxXQUFPO0FBQUEsRUFDUjtBQUVBLFNBQU8sS0FDTCxRQUFRLHNCQUFzQixLQUFLLFlBQVksRUFDL0MsUUFBUSxrQkFBa0IsS0FBSyxRQUFRLEVBQ3ZDLFFBQVEsaUJBQWlCLEtBQUssT0FBTyxFQUNyQyxRQUFRLHNCQUFzQixLQUFLLFlBQVk7QUFDakQsU0FBTztBQUNSOzs7QUhTQSxJQUFNLG1CQUFtQztBQUFBLEVBQ3hDLGtCQUFrQjtBQUFBLEVBQ2xCLGtCQUFrQjtBQUFBLEVBQ2xCLGFBQWE7QUFBQSxFQUNiLG9CQUFvQjtBQUFBLEVBQ3BCLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLFlBQVk7QUFBQSxFQUNaLHNCQUFzQjtBQUFBLEVBQ3RCLHlCQUF5QjtBQUFBLEVBQ3pCLHFCQUFxQjtBQUN0QjtBQUVBLElBQU0sc0JBQXNCO0FBRTVCLElBQXFCLHlCQUFyQixjQUFvRCx3QkFBTztBQUFBLEVBQTNEO0FBQUE7QUFFQyxrQkFBa0IsQ0FBQztBQUFBO0FBQUEsRUFHYixTQUFTO0FBQUE7QUFFZCxZQUFNLE1BQU07QUFDWixjQUFRO0FBQUEsUUFDUCxtQkFBbUIsSUFBSSxRQUFRLElBQUkscUJBQXFCO0FBQUEsTUFDekQ7QUFDQSxZQUFNLEtBQUssYUFBYTtBQUV4QixXQUFLO0FBQUEsUUFDSixLQUFLLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxTQUFTO0FBRXJDLGNBQUksRUFBRSxnQkFBZ0I7QUFBUTtBQUM5QixnQkFBTSxZQUFZLElBQUksS0FBSyxFQUFFLFFBQVEsSUFBSSxLQUFLLEtBQUs7QUFFbkQsY0FBSSxZQUFZO0FBQU07QUFFdEIsY0FBSSxlQUFlLElBQUk7QUFBRztBQUMxQixjQUFJLGNBQWMsSUFBSSxHQUFHO0FBQ3hCLHFCQUFTLHdCQUF3QixJQUFJO0FBQ3JDLGlCQUFLLG1CQUFtQixNQUFNLEtBQUssU0FBUyxVQUFVO0FBQUEsVUFDdkQsT0FBTztBQUNOLGdCQUFJLEtBQUssU0FBUyxzQkFBc0I7QUFDdkMsdUJBQVMsaUNBQWlDLElBQUk7QUFDOUMsa0JBQUksS0FBSyxxQkFBcUIsSUFBSSxHQUFHO0FBQ3BDLHlCQUFTLHdCQUF3QixJQUFJO0FBQ3JDO0FBQUEsY0FDRDtBQUNBLG1CQUFLLG1CQUFtQixNQUFNLEtBQUssU0FBUyxVQUFVO0FBQUEsWUFDdkQ7QUFBQSxVQUNEO0FBQUEsUUFDRCxDQUFDO0FBQUEsTUFDRjtBQUVBLFlBQU0sMEJBQTBCLE1BQU07QUFDckMsYUFBSyxxQkFBcUI7QUFBQSxNQUMzQjtBQUNBLFdBQUssV0FBVztBQUFBLFFBQ2YsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sVUFBVTtBQUFBLE1BQ1gsQ0FBQztBQUNELFVBQUksT0FBTztBQUNWLGFBQUs7QUFBQSxVQUNKO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUVBLFlBQU0sdUJBQXVCLE1BQU07QUFDbEMsYUFBSyxxQkFBcUI7QUFBQSxNQUMzQjtBQUNBLFdBQUssV0FBVztBQUFBLFFBQ2YsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sVUFBVTtBQUFBLE1BQ1gsQ0FBQztBQUNELFVBQUksT0FBTztBQUNWLGFBQUs7QUFBQSxVQUNKO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUdBLFdBQUssY0FBYyxJQUFJLFdBQVcsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLElBQ2xEO0FBQUE7QUFBQSxFQUVNLG1CQUFtQixNQUFhLGFBQWEsT0FBTztBQUFBO0FBRXpELFlBQU0sYUFBYSxLQUFLLGNBQWM7QUFDdEMsVUFBSSxDQUFDLFlBQVk7QUFDaEIsWUFBSSx3QkFBTyw4QkFBOEI7QUFDekM7QUFBQSxNQUNEO0FBRUEsWUFBTSxFQUFFLE1BQU0sU0FBUyxhQUFhLElBQUksS0FBSztBQUFBLFFBQzVDO0FBQUEsUUFDQTtBQUFBLE1BQ0Q7QUFDQSxlQUFTLHNCQUFzQixTQUFTLFlBQVk7QUFFcEQsVUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVk7QUFDakMsYUFBSztBQUFBLFVBQ0o7QUFBQSxVQUNBLGVBQWUsT0FBTztBQUFBLFVBQ3RCLFdBQVc7QUFBQSxRQUNaO0FBQ0E7QUFBQSxNQUNEO0FBQ0EsV0FBSyxXQUFXLE1BQU0sU0FBUyxXQUFXLE1BQU0sSUFBSTtBQUFBLElBQ3JEO0FBQUE7QUFBQSxFQUVNLFdBQ0wsTUFDQSxjQUNBLFlBQ0Esb0JBQ0M7QUFBQTtBQUVELFlBQU0sRUFBRSxNQUFNLFFBQVEsSUFBSSxNQUFNLEtBQUs7QUFBQSxRQUNwQztBQUFBLFFBQ0E7QUFBQSxNQUNEO0FBQ0EsZUFBUyx5QkFBeUIsT0FBTztBQUN6QyxZQUFNLGFBQWEsS0FBSztBQUd4QixZQUFNLFdBQVcsS0FBSyxJQUFJLFlBQVk7QUFBQSxRQUNyQztBQUFBLFFBQ0E7QUFBQSxNQUNEO0FBR0EsWUFBTSxVQUFVLEtBQUssS0FBSyxLQUFLLE9BQU8sTUFBTSxPQUFPO0FBQ25ELFVBQUk7QUFDSCxjQUFNLEtBQUssSUFBSSxZQUFZLFdBQVcsTUFBTSxPQUFPO0FBQUEsTUFDcEQsU0FBUyxLQUFQO0FBQ0QsWUFBSSx3QkFBTyxvQkFBb0IsWUFBWSxLQUFLO0FBQ2hELGNBQU07QUFBQSxNQUNQO0FBRUEsVUFBSSxDQUFDLG9CQUFvQjtBQUN4QjtBQUFBLE1BQ0Q7QUFLQSxZQUFNLGNBQWMsS0FBSyxJQUFJLFlBQVk7QUFBQSxRQUN4QztBQUFBLFFBQ0E7QUFBQSxNQUNEO0FBQ0EsZUFBUyxnQkFBZ0IsVUFBVSxXQUFXO0FBRTlDLFlBQU0sU0FBUyxLQUFLLGdCQUFnQjtBQUNwQyxVQUFJLENBQUMsUUFBUTtBQUNaLFlBQUksd0JBQU8sb0JBQW9CLDJCQUEyQjtBQUMxRDtBQUFBLE1BQ0Q7QUFFQSxZQUFNLFNBQVMsT0FBTyxVQUFVO0FBQ2hDLFlBQU0sT0FBTyxPQUFPLFFBQVEsT0FBTyxJQUFJO0FBRXZDLFVBQUksZUFBZTtBQUNuQixVQUFJLEtBQUssU0FBUyxhQUFhO0FBQzlCLGNBQU0sb0JBQW9CLEdBQUcsWUFBWSxNQUFNLEdBQUcsRUFBRSxJQUNuRCxLQUFLLFNBQVMsaUJBQ1osWUFBWSxNQUFNLEVBQUU7QUFDdkIsdUJBQWUsS0FBSyxRQUFRLFVBQVUsaUJBQWlCO0FBQUEsTUFDeEQsT0FBTztBQUNOLHVCQUFlLEtBQUssUUFBUSxVQUFVLFdBQVc7QUFBQSxNQUNsRDtBQUNBLGVBQVMsaUNBQWlDLE1BQU0sWUFBWTtBQUU1RCxhQUFPLFlBQVk7QUFBQSxRQUNsQixTQUFTO0FBQUEsVUFDUjtBQUFBLFlBQ0MsTUFBTSxpQ0FBSyxTQUFMLEVBQWEsSUFBSSxFQUFFO0FBQUEsWUFDekIsSUFBSSxpQ0FBSyxTQUFMLEVBQWEsSUFBSSxLQUFLLE9BQU87QUFBQSxZQUNqQyxNQUFNO0FBQUEsVUFDUDtBQUFBLFFBQ0Q7QUFBQSxNQUNELENBQUM7QUFFRCxVQUFJLENBQUMsS0FBSyxTQUFTLHFCQUFxQjtBQUN2QyxZQUFJLHdCQUFPLFdBQVcsaUJBQWlCLFNBQVM7QUFBQSxNQUNqRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLEVBRUEsZ0JBQWdCLE1BQWEsU0FBaUIsWUFBb0I7QUFDakUsVUFBTSxRQUFRLElBQUk7QUFBQSxNQUNqQixLQUFLO0FBQUEsTUFDTDtBQUFBLE1BQ0E7QUFBQSxNQUNBLENBQUMsa0JBQTBCO0FBQzFCLGlCQUFTLGtCQUFrQixhQUFhO0FBQ3hDLGFBQUssV0FBVyxNQUFNLGVBQWUsWUFBWSxJQUFJO0FBQUEsTUFDdEQ7QUFBQSxNQUNBLE1BQU07QUFDTCxhQUFLLE9BQU8sT0FBTyxLQUFLLE9BQU8sUUFBUSxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQ2pEO0FBQUEsSUFDRDtBQUNBLFNBQUssT0FBTyxLQUFLLEtBQUs7QUFDdEIsVUFBTSxLQUFLO0FBQ1gsYUFBUyxnQkFBZ0IsS0FBSyxPQUFPLE1BQU07QUFBQSxFQUM1QztBQUFBLEVBRUEsdUJBQXVCO0FBQ3RCLFVBQU0sYUFBYSxLQUFLLGNBQWM7QUFDdEMsVUFBTSxRQUFRLElBQUk7QUFBQSxNQUNqQixLQUFLO0FBQUEsTUFDTDtBQUFBLE1BQ0EsQ0FBTyxNQUFhLFNBQWlCO0FBQ3BDLGNBQU0sS0FBSyxXQUFXLE1BQU0sTUFBTSxXQUFXLElBQUk7QUFBQSxNQUNsRDtBQUFBLE1BQ0EsTUFBTTtBQUNMLGFBQUssT0FBTyxPQUFPLEtBQUssT0FBTyxRQUFRLEtBQUssR0FBRyxDQUFDO0FBQUEsTUFDakQ7QUFBQSxJQUNEO0FBQ0EsU0FBSyxPQUFPLEtBQUssS0FBSztBQUN0QixVQUFNLEtBQUs7QUFBQSxFQUNaO0FBQUEsRUFFTSx1QkFBdUI7QUFBQTtBQUM1QixZQUFNLGFBQWEsS0FBSyxjQUFjO0FBQ3RDLFlBQU0sWUFBWSxLQUFLLElBQUksY0FBYyxhQUFhLFVBQVU7QUFDaEUsVUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVO0FBQVE7QUFDckMsWUFBTSxrQkFBa0I7QUFFeEIsaUJBQVcsU0FBUyxVQUFVLFFBQVE7QUFDckMsY0FBTSxPQUFPLEtBQUssSUFBSSxjQUFjO0FBQUEsVUFDbkMsTUFBTTtBQUFBLFVBQ04sV0FBVztBQUFBLFFBQ1o7QUFDQSxZQUFJLENBQUMsTUFBTTtBQUNWLGtCQUFRLEtBQUssa0JBQWtCLE1BQU0sSUFBSTtBQUN6QztBQUFBLFFBQ0Q7QUFFQSxjQUFNLEtBQUssZ0JBQWdCLEtBQUssS0FBSyxTQUFTO0FBQzlDLFlBQUksQ0FBQztBQUFJO0FBR1QsY0FBTSxFQUFFLFNBQVMsYUFBYSxJQUFJLEtBQUs7QUFBQSxVQUN0QztBQUFBLFVBQ0E7QUFBQSxRQUNEO0FBQ0EsaUJBQVMsc0JBQXNCLFNBQVMsWUFBWTtBQUNwRCxZQUFJLENBQUMsY0FBYztBQUNsQixjQUFJO0FBQUEsWUFDSDtBQUFBLFVBQ0Q7QUFDQTtBQUFBLFFBQ0Q7QUFFQSxjQUFNLEtBQUssV0FBVyxNQUFNLFNBQVMsV0FBVyxNQUFNLEtBQUs7QUFBQSxNQUM1RDtBQUFBLElBQ0Q7QUFBQTtBQUFBO0FBQUEsRUFHQSxnQkFBZ0IsTUFBYSxZQUFtQjtBQUMvQyxRQUFJLGVBQWU7QUFDbkIsUUFBSSxlQUFlO0FBQ25CLFFBQUk7QUFDSixVQUFNLFlBQVksS0FBSyxJQUFJLGNBQWMsYUFBYSxVQUFVO0FBQ2hFLFFBQUksV0FBVztBQUNkLGVBQVMsZUFBZSxVQUFVLFdBQVc7QUFDN0Msb0JBQWMsVUFBVTtBQUN4QixzQkFBZSwyQ0FBYSxpQkFBZ0I7QUFDNUMscUJBQWUsZ0JBQWdCLFVBQVUsUUFBUTtBQUFBLElBQ2xELE9BQU87QUFDTixjQUFRO0FBQUEsUUFDUDtBQUFBLFFBQ0EsV0FBVztBQUFBLE1BQ1o7QUFBQSxJQUNEO0FBRUEsVUFBTSxPQUFPO0FBQUEsTUFDWixLQUFLLFNBQVM7QUFBQSxNQUNkO0FBQUEsUUFDQztBQUFBLFFBQ0EsVUFBVSxXQUFXO0FBQUEsUUFDckIsU0FBUyxXQUFXLE9BQU87QUFBQSxRQUMzQjtBQUFBLE1BQ0Q7QUFBQSxNQUNBO0FBQUEsSUFDRDtBQUNBLFVBQU0sbUJBQW1CLElBQUk7QUFBQSxNQUM1QixJQUFJLEtBQUssU0FBUztBQUFBLE1BQ2xCO0FBQUEsSUFDRDtBQUVBLFdBQU87QUFBQSxNQUNOO0FBQUEsTUFDQSxTQUFTLE9BQU8sTUFBTSxLQUFLO0FBQUEsTUFDM0IsY0FBYyxLQUFLLFFBQVEsa0JBQWtCLEVBQUUsTUFBTTtBQUFBLElBQ3REO0FBQUEsRUFDRDtBQUFBO0FBQUEsRUFHTSxtQkFBbUIsU0FBaUIsTUFBK0I7QUFBQTtBQUV4RSxZQUFNLE1BQU0sS0FBSyxPQUFPO0FBQ3hCLFlBQU0sU0FBUyxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsS0FBSyxHQUFHO0FBQ3BELGVBQVMsaUJBQWlCLE1BQU07QUFHaEMsWUFBTSxhQUFhLEtBQUssVUFBVSxPQUFPLEdBQ3hDLGNBQWMsUUFBUTtBQUFBLFFBQ3JCO0FBQUEsUUFDQSxRQUFRLFNBQVMsV0FBVyxTQUFTO0FBQUEsTUFDdEMsR0FDQSxxQkFBcUIsYUFBYSxXQUFXLEdBQzdDLFlBQVksS0FBSyxTQUFTLG9CQUMxQixtQkFBbUIsYUFBYSxTQUFTO0FBRTFDLFVBQUk7QUFDSixVQUFJLEtBQUssU0FBUyxrQkFBa0I7QUFDbkMsdUJBQWUsSUFBSTtBQUFBLFVBQ2xCLG1CQUFtQiwyQkFBMkIseUJBQXlCO0FBQUEsUUFDeEU7QUFBQSxNQUNELE9BQU87QUFDTix1QkFBZSxJQUFJO0FBQUEsVUFDbEIsWUFBWSxzQkFBc0IscUNBQXFDO0FBQUEsUUFDeEU7QUFBQSxNQUNEO0FBQ0EsZUFBUyxnQkFBZ0IsWUFBWTtBQUVyQyxZQUFNLGlCQUEyQixDQUFDO0FBQ2xDLFVBQUksaUJBQWlCO0FBQ3JCLGVBQVMsV0FBVyxPQUFPLE9BQU87QUFDakMsa0JBQVUsS0FBSyxTQUFTLE9BQU87QUFDL0IsWUFBSSxXQUFXLFNBQVM7QUFDdkIsMkJBQWlCO0FBQ2pCO0FBQUEsUUFDRDtBQUdBLGNBQU0sSUFBSSxhQUFhLEtBQUssT0FBTztBQUNuQyxZQUFJLENBQUM7QUFBRztBQUVSLHVCQUFlLEtBQUssU0FBUyxFQUFFLE9BQU8sTUFBTSxDQUFDO0FBQUEsTUFDOUM7QUFFQSxVQUFJLGtCQUFrQixLQUFLLFNBQVMsaUJBQWlCO0FBRXBELGNBQU0sWUFDTCxlQUFlLFNBQVMsSUFBSSxLQUFLLElBQUksR0FBRyxjQUFjLElBQUksSUFBSTtBQUUvRCxZQUFJLEtBQUssU0FBUyxrQkFBa0I7QUFDbkMsb0JBQVUsR0FBRyxZQUFZLFlBQVksZUFBZTtBQUFBLFFBQ3JELE9BQU87QUFDTixvQkFBVSxHQUFHLGNBQWMsWUFBWSxhQUFhO0FBQUEsUUFDckQ7QUFBQSxNQUNEO0FBRUEsYUFBTztBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTSxRQUFRLE1BQU0sR0FBRyxRQUFRLFNBQVMsV0FBVyxTQUFTLENBQUM7QUFBQSxRQUM3RCxXQUFXO0FBQUEsTUFDWjtBQUFBLElBQ0Q7QUFBQTtBQUFBLEVBRUEsZ0JBQWdCO0FBQ2YsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWTtBQUNoRSxVQUFNLE9BQU8sNkJBQU07QUFDbkIsYUFBUyxlQUFlLDZCQUFNLElBQUk7QUFDbEMsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNBLGtCQUFrQjtBQUNqQixVQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDZCQUFZO0FBQ2hFLFdBQU8sNkJBQU07QUFBQSxFQUNkO0FBQUEsRUFFQSxXQUFXO0FBQ1YsU0FBSyxPQUFPLElBQUksQ0FBQyxVQUFVLE1BQU0sTUFBTSxDQUFDO0FBQUEsRUFDekM7QUFBQSxFQUVBLHFCQUFxQixNQUFzQjtBQUMxQyxVQUFNLFVBQVUsS0FBSyxTQUFTO0FBQzlCLFFBQUksQ0FBQztBQUFTLGFBQU87QUFDckIsV0FBTyxJQUFJLE9BQU8sT0FBTyxFQUFFLEtBQUssS0FBSyxTQUFTO0FBQUEsRUFDL0M7QUFBQSxFQUVNLGVBQWU7QUFBQTtBQUNwQixXQUFLLFdBQVcsT0FBTztBQUFBLFFBQ3RCLENBQUM7QUFBQSxRQUNEO0FBQUEsUUFDQSxNQUFNLEtBQUssU0FBUztBQUFBLE1BQ3JCO0FBQUEsSUFDRDtBQUFBO0FBQUEsRUFFTSxlQUFlO0FBQUE7QUFDcEIsWUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsSUFDbEM7QUFBQTtBQUNEO0FBRUEsU0FBUyxnQkFBZ0IsVUFBMkI7QUFDbkQsTUFBSSxZQUFZLFNBQVMsU0FBUyxHQUFHO0FBQ3BDLGVBQVcsV0FBVyxVQUFVO0FBQy9CLFVBQUksUUFBUSxVQUFVLEdBQUc7QUFDeEIsZUFBTyxRQUFRO0FBQUEsTUFDaEI7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNBLFNBQU87QUFDUjtBQUVBLFNBQVMsY0FBYyxNQUE4QjtBQUNwRCxNQUFJLGdCQUFnQix3QkFBTztBQUMxQixRQUFJLEtBQUssS0FBSyxXQUFXLG1CQUFtQixHQUFHO0FBQzlDLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUNBLFNBQU87QUFDUjtBQUVBLFNBQVMsZUFBZSxNQUE4QjtBQUNyRCxNQUFJLGdCQUFnQix3QkFBTztBQUMxQixRQUFJLEtBQUssY0FBYyxNQUFNO0FBQzVCLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUNBLFNBQU87QUFDUjtBQWFBLElBQU0sbUJBQU4sY0FBK0IsdUJBQU07QUFBQSxFQU1wQyxZQUNDLEtBQ0EsS0FDQSxNQUNBLFlBQ0EsU0FDQztBQUNELFVBQU0sR0FBRztBQUNULFNBQUssTUFBTTtBQUNYLFNBQUssT0FBTztBQUNaLFNBQUssYUFBYTtBQUNsQixTQUFLLGVBQWU7QUFBQSxFQUNyQjtBQUFBLEVBRUEsU0FBUztBQUNSLFNBQUssWUFBWSxTQUFTLG9CQUFvQjtBQUM5QyxVQUFNLEVBQUUsV0FBVyxRQUFRLElBQUk7QUFDL0IsWUFBUSxRQUFRLGNBQWM7QUFFOUIsVUFBTSxpQkFBaUIsVUFBVSxVQUFVO0FBQUEsTUFDMUMsS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELG1CQUFlLFNBQVMsT0FBTztBQUFBLE1BQzlCLE1BQU07QUFBQSxRQUNMLEtBQUssS0FBSyxJQUFJLE1BQU0sZ0JBQWdCLEtBQUssR0FBRztBQUFBLE1BQzdDO0FBQUEsSUFDRCxDQUFDO0FBRUQsUUFBSSxPQUFPLEtBQUs7QUFDaEIsVUFBTSxNQUFNLEtBQUssSUFBSTtBQUNyQixVQUFNLGFBQWEsQ0FBQ0MsVUFBaUJBLFFBQU8sTUFBTTtBQUNsRCxVQUFNLGFBQWEsQ0FBQ0EsVUFDbkIsS0FBSyxLQUFLLEtBQUssSUFBSSxPQUFPLE1BQU0sV0FBV0EsS0FBSSxDQUFDO0FBRWpELFVBQU0sU0FBUyxrQkFBa0IsV0FBVztBQUFBLE1BQzNDLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLFVBQVU7QUFBQSxRQUNUO0FBQUEsVUFDQyxLQUFLO0FBQUEsVUFDTCxVQUFVO0FBQUEsWUFDVDtBQUFBLGNBQ0MsS0FBSztBQUFBLGNBQ0wsTUFBTTtBQUFBLFlBQ1A7QUFBQSxZQUNBO0FBQUEsY0FDQyxLQUFLO0FBQUEsY0FDTCxNQUFNLEtBQUssSUFBSTtBQUFBLFlBQ2hCO0FBQUEsVUFDRDtBQUFBLFFBQ0Q7QUFBQSxRQUNBO0FBQUEsVUFDQyxLQUFLO0FBQUEsVUFDTCxVQUFVO0FBQUEsWUFDVDtBQUFBLGNBQ0MsS0FBSztBQUFBLGNBQ0wsTUFBTTtBQUFBLFlBQ1A7QUFBQSxZQUNBO0FBQUEsY0FDQyxLQUFLO0FBQUEsY0FDTCxNQUFNLFdBQVcsSUFBSTtBQUFBLFlBQ3RCO0FBQUEsVUFDRDtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBRUQsVUFBTSxXQUFXLE1BQVk7QUFDNUIsZUFBUyxZQUFZLFFBQVEsTUFBTTtBQUNuQyxXQUFLLFdBQVcsV0FBVyxJQUFJLENBQUM7QUFBQSxJQUNqQztBQUVBLFVBQU0sY0FBYyxJQUFJLHlCQUFRLFNBQVMsRUFDdkMsUUFBUSxVQUFVLEVBQ2xCO0FBQUEsTUFDQTtBQUFBLElBQ0QsRUFDQztBQUFBLE1BQVEsQ0FBQyxTQUNULEtBQUssU0FBUyxJQUFJLEVBQUUsU0FBUyxDQUFPLFVBQVU7QUFDN0MsZUFBTyxVQUFVLFNBQVMsS0FBSztBQUMvQixlQUFPLFNBQVMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEdBQUcsWUFDakMsV0FBVyxJQUFJO0FBQUEsTUFDakIsRUFBQztBQUFBLElBQ0Y7QUFFRCxVQUFNLGNBQWMsWUFBWSxVQUM5QixTQUFTLENBQUM7QUFDWixnQkFBWSxNQUFNO0FBQ2xCLFVBQU0saUJBQWlCLDJCQUEyQixXQUFXO0FBQzdELGdCQUFZLGlCQUFpQixXQUFXLENBQU8sTUFBTTtBQUVwRCxVQUFJLEVBQUUsUUFBUSxXQUFXLENBQUMsZUFBZSxNQUFNO0FBQzlDLFVBQUUsZUFBZTtBQUNqQixZQUFJLENBQUMsTUFBTTtBQUNWLGtCQUFRLFlBQVk7QUFDcEIsa0JBQVEsTUFBTSxVQUFVO0FBQ3hCO0FBQUEsUUFDRDtBQUNBLGlCQUFTO0FBQ1QsYUFBSyxNQUFNO0FBQUEsTUFDWjtBQUFBLElBQ0QsRUFBQztBQUVELFVBQU0sVUFBVSxVQUFVLFVBQVU7QUFBQSxNQUNuQyxLQUFLO0FBQUEsTUFDTCxNQUFNO0FBQUEsUUFDTCxPQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0QsQ0FBQztBQUVELFFBQUkseUJBQVEsU0FBUyxFQUNuQixVQUFVLENBQUMsV0FBVztBQUN0QixhQUFPLGNBQWMsUUFBUSxFQUFFLFFBQVEsTUFBTTtBQUM1QyxpQkFBUztBQUNULGFBQUssTUFBTTtBQUFBLE1BQ1osQ0FBQztBQUFBLElBQ0YsQ0FBQyxFQUNBLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGFBQU8sY0FBYyxRQUFRLEVBQUUsUUFBUSxNQUFNO0FBQzVDLGFBQUssTUFBTTtBQUFBLE1BQ1osQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLFVBQVU7QUFDVCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUNoQixTQUFLLGFBQWE7QUFBQSxFQUNuQjtBQUNEO0FBRUEsSUFBTSx1QkFBdUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWU3QixJQUFNLGFBQU4sY0FBeUIsa0NBQWlCO0FBQUEsRUFHekMsWUFBWSxLQUFVLFFBQWdDO0FBQ3JELFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLFVBQWdCO0FBQ2YsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBRWxCLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLG9CQUFvQixFQUM1QixRQUFRLG9CQUFvQixFQUM1QixTQUFTLCtCQUErQixFQUN4QztBQUFBLE1BQVEsQ0FBQyxTQUNULEtBQ0UsZUFBZSxrQkFBa0IsRUFDakMsU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsRUFDOUMsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLG9DQUFvQyxFQUM1QztBQUFBLE1BQ0E7QUFBQSxJQUNELEVBQ0M7QUFBQSxNQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCLEVBQzlDLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsRUFBQztBQUFBLElBQ0g7QUFFRCxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxjQUFjLEVBQ3RCO0FBQUEsTUFDQTtBQUFBLElBQ0QsRUFDQztBQUFBLE1BQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxXQUFXLEVBQ3pDLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLEVBQUM7QUFBQSxJQUNIO0FBRUQsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsZ0JBQWdCLEVBQ3hCLFFBQVEsa0NBQWtDLEVBQzFDO0FBQUEsTUFBUSxDQUFDLFNBQ1QsS0FDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGNBQWMsRUFDNUMsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsaUJBQ3BCLFVBQVUsVUFBVSxLQUFLO0FBQzFCLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLDRCQUE0QixFQUNwQztBQUFBLE1BQ0E7QUFBQSxJQUNELEVBQ0M7QUFBQSxNQUFRLENBQUMsU0FDVCxLQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQWtCLEVBQ2hELFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLHFCQUNwQixVQUFVLFVBQVUsS0FBSztBQUMxQixjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsRUFBQztBQUFBLElBQ0g7QUFFRCxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSw2QkFBNkIsRUFDckM7QUFBQSxNQUNBO0FBQUEsSUFDRCxFQUNDO0FBQUEsTUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsRUFDN0MsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLGFBQWEsRUFDckI7QUFBQSxNQUNBO0FBQUEsSUFDRCxFQUNDO0FBQUEsTUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFDeEMsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsRUFBQztBQUFBLElBQ0g7QUFFRCxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSx3QkFBd0IsRUFDaEM7QUFBQSxNQUNBO0FBQUE7QUFBQTtBQUFBLElBR0QsRUFDQztBQUFBLE1BQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxvQkFBb0IsRUFDbEQsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsdUJBQXVCO0FBQzVDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLDJCQUEyQixFQUNuQztBQUFBLE1BQ0E7QUFBQTtBQUFBLElBRUQsRUFDQyxTQUFTLHNCQUFzQixFQUMvQjtBQUFBLE1BQVksQ0FBQyxTQUNiLEtBQ0UsZUFBZSwyQkFBMkIsRUFDMUMsU0FBUyxLQUFLLE9BQU8sU0FBUyx1QkFBdUIsRUFDckQsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLHVCQUF1QixFQUMvQjtBQUFBLE1BQ0E7QUFBQTtBQUFBLElBRUQsRUFDQztBQUFBLE1BQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxtQkFBbUIsRUFDakQsU0FBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQzNDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxFQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFDRDsiLAogICJuYW1lcyI6IFsibW9kdWxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJzdGVtIl0KfQo=
